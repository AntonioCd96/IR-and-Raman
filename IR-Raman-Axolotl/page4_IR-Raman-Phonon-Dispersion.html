

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>IR and raman &#8212; Interactive IR and Raman</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"TeX": {"Macros": {"N": "\\mathbb{N}", "floor": ["\\lfloor#1\\rfloor", 1], "bmat": ["\\left[\\begin{array}"], "emat": ["\\end{array}\\right]"]}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'IR-Raman-Axolotl/page4_IR-Raman-Phonon-Dispersion';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../inicio.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-LSMO.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo-LSMO.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../inicio.html">
                    Welcome
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Basic_Notebook.html">Jupyter Notebook</a></li>




<li class="toctree-l1"><a class="reference internal" href="../page1.html">Vibrational spectroscopy</a></li>






<li class="toctree-l1"><a class="reference internal" href="../page1_5.html">Vibrational spectroscopy - Interactive</a></li>



<li class="toctree-l1"><a class="reference internal" href="../page2.html">Calculate your own IR and Raman Spectra</a></li>


<li class="toctree-l1"><a class="reference internal" href="../page3.html">Harmonic Oscillator - Quantum Mechanics Approach</a></li>


<li class="toctree-l1"><a class="reference internal" href="../page3_5.html">Harmonic Oscillator - Quantum Mechanics Approach - Interactive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../page4_IR-Raman-Phonon-Dispersion.html">IR and raman</a></li>



<li class="toctree-l1"><a class="reference internal" href="../page4_phonon-band%20structure.html">Phonon structure of different solids</a></li>


<li class="toctree-l1"><a class="reference internal" href="../page4_Solids_IR-Raman_3D_anim.html">Auxilair documents</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/AntonioCd96/IR-and-Raman.git/master?urlpath=lab/tree/IR-Raman-Axolotl/page4_IR-Raman-Phonon-Dispersion.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://noto.epfl.ch/hub/user-redirect/git-pull?repo=https%3A//github.com/AntonioCd96/IR-and-Raman.git&urlpath=lab/tree/IR-and-Raman.git/IR-Raman-Axolotl/page4_IR-Raman-Phonon-Dispersion.ipynb&branch=master" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onJupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/AntonioCd96/IR-and-Raman.git/blob/master/IR-Raman-Axolotl/page4_IR-Raman-Phonon-Dispersion.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/AntonioCd96/IR-and-Raman.git" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/AntonioCd96/IR-and-Raman.git/issues/new?title=Issue%20on%20page%20%2FIR-Raman-Axolotl/page4_IR-Raman-Phonon-Dispersion.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/IR-Raman-Axolotl/page4_IR-Raman-Phonon-Dispersion.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>IR and raman</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">IR and raman</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#example-for-tio-2-rutile">Example for <span class="math notranslate nohighlight">\(TiO_2 - rutile\)</span></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comparison-of-experimental-data-and-simulated-raman">Comparison of experimental data and simulated Raman</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#how-raman-and-ir-are-simulated-in-reality">How Raman and IR are simulated in reality?</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#research-at-epfl">Research at EPFL</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ir-and-raman">
<h1>IR and raman<a class="headerlink" href="#ir-and-raman" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>IR-active modes are characterized by changes in the dipole moment of the molecule during vibration. To calculate IR intensities, you can use the following formula for each mode:</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(
I_{IR} \propto \sum_{i} \left| \sum_{\alpha} \mathbf{e}_{i,\alpha} \cdot \mathbf{d}_{\alpha} \right|^2 \cdot \delta(\omega - \omega_i)
\)</span></p>
<p>where <span class="math notranslate nohighlight">\(\mathbf{e}_{i,\alpha}\)</span>   is the eigenvector of mode<span class="math notranslate nohighlight">\(i\)</span> along direction <span class="math notranslate nohighlight">\(\alpha\)</span> ; <span class="math notranslate nohighlight">\(\mathbf{d}_{\alpha}\)</span>  is the unit vector for the
<span class="math notranslate nohighlight">\(e_{i, α-th}\)</span> Cartesian direction, a d <span class="math notranslate nohighlight">\(\delta(\omega-\omega_i)\)</span> is a Dirac delta function centered at the frequency <span class="math notranslate nohighlight">\(\omega_i\)</span> of the mode <span class="math notranslate nohighlight">\(i\)</span></p>
<p>The resulting values represent the intensities of IR-active modes in the calculated IR spectrum.</p>
<ul class="simple">
<li><p>On the other side, to estimate  Raman Intensities
Raman-active modes are characterized by changes in polarizability during vibration. The Raman intensity can be calculated using the following formula for each mode:</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(I_{\text{Raman}} \propto \sum_{i} \left| \sum_{\alpha, \beta} \mathbf{e}_{i,\alpha} \cdot \mathbf{e}_{i,\beta} \cdot \alpha_{\alpha, \beta} \right|^2 \cdot \delta(\omega - \omega_i\)</span></p>
<p>where<span class="math notranslate nohighlight">\( \alpha_{\alpha, \beta}\)</span>   is the polarizability tensor element between directio <span class="math notranslate nohighlight">\( \)</span>
α an<span class="math notranslate nohighlight">\(d\)</span> β.</p>
<p>The resulting values represent the intensities of Raman-active modes in the calculated Raman spectrum.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>mp-api
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>mpcontribs-client
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>crystal-toolkit<span class="w"> </span>--upgrade
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>dash
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: mp-api in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (0.40.0)
Requirement already satisfied: setuptools in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mp-api) (67.7.2)
Requirement already satisfied: msgpack in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mp-api) (1.0.7)
Requirement already satisfied: maggma&gt;=0.57.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mp-api) (0.63.1)
Requirement already satisfied: pymatgen&gt;=2022.3.7 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mp-api) (2024.2.8)
Requirement already satisfied: typing-extensions&gt;=3.7.4.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mp-api) (4.9.0)
Requirement already satisfied: requests&gt;=2.23.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mp-api) (2.29.0)
Requirement already satisfied: monty&gt;=2023.9.25 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mp-api) (2024.2.2)
Requirement already satisfied: emmet-core&gt;=0.78.0rc3 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mp-api) (0.78.0rc3)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: pydantic&gt;=2.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from emmet-core&gt;=0.78.0rc3-&gt;mp-api) (2.6.1)
Requirement already satisfied: pydantic-settings&gt;=2.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from emmet-core&gt;=0.78.0rc3-&gt;mp-api) (2.1.0)
Requirement already satisfied: pybtex~=0.24 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from emmet-core&gt;=0.78.0rc3-&gt;mp-api) (0.24.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: ruamel.yaml&lt;0.18 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (0.17.40)
Requirement already satisfied: pymongo&gt;=4.2.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (4.6.1)
Requirement already satisfied: mongomock&gt;=3.10.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (4.1.2)
Requirement already satisfied: pydash&gt;=4.1.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (7.0.7)
Requirement already satisfied: jsonschema&gt;=3.1.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (4.17.3)
Requirement already satisfied: tqdm&gt;=4.19.6 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (4.66.2)
Requirement already satisfied: mongogrant&gt;=0.3.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (0.3.3)
Requirement already satisfied: aioitertools&gt;=0.5.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (0.11.0)
Requirement already satisfied: numpy&gt;=1.17.3 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (1.25.2)
Requirement already satisfied: fastapi&gt;=0.42.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (0.109.2)
Requirement already satisfied: pyzmq&gt;=24.0.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (25.0.2)
Requirement already satisfied: dnspython&gt;=1.16.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (2.5.0)
Requirement already satisfied: sshtunnel&gt;=0.1.5 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (0.4.0)
Requirement already satisfied: orjson&gt;=3.9.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (3.9.14)
Requirement already satisfied: boto3&gt;=1.20.41 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (1.34.43)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (2.8.2)
Requirement already satisfied: uvicorn&gt;=0.18.3 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from maggma&gt;=0.57.1-&gt;mp-api) (0.27.1)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: matplotlib&gt;=1.5 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (3.7.1)
Requirement already satisfied: networkx&gt;=2.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (3.2.1)
Requirement already satisfied: palettable&gt;=3.1.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (3.3.3)
Requirement already satisfied: pandas in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (2.0.1)
Requirement already satisfied: plotly&gt;=4.5.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (5.14.1)
Requirement already satisfied: scipy&gt;=1.5.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (1.9.2)
Requirement already satisfied: spglib&gt;=2.0.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (2.3.1)
Requirement already satisfied: sympy in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (1.12)
Requirement already satisfied: tabulate in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (0.9.0)
Requirement already satisfied: uncertainties&gt;=3.1.4 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (3.1.7)
Requirement already satisfied: joblib in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen&gt;=2022.3.7-&gt;mp-api) (1.3.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from requests&gt;=2.23.0-&gt;mp-api) (3.1.0)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from requests&gt;=2.23.0-&gt;mp-api) (3.4)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from requests&gt;=2.23.0-&gt;mp-api) (1.26.15)
Requirement already satisfied: certifi&gt;=2017.4.17 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from requests&gt;=2.23.0-&gt;mp-api) (2023.7.22)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: botocore&lt;1.35.0,&gt;=1.34.43 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from boto3&gt;=1.20.41-&gt;maggma&gt;=0.57.1-&gt;mp-api) (1.34.43)
Requirement already satisfied: jmespath&lt;2.0.0,&gt;=0.7.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from boto3&gt;=1.20.41-&gt;maggma&gt;=0.57.1-&gt;mp-api) (1.0.1)
Requirement already satisfied: s3transfer&lt;0.11.0,&gt;=0.10.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from boto3&gt;=1.20.41-&gt;maggma&gt;=0.57.1-&gt;mp-api) (0.10.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: starlette&lt;0.37.0,&gt;=0.36.3 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from fastapi&gt;=0.42.0-&gt;maggma&gt;=0.57.1-&gt;mp-api) (0.36.3)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: attrs&gt;=17.4.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema&gt;=3.1.1-&gt;maggma&gt;=0.57.1-&gt;mp-api) (23.1.0)
Requirement already satisfied: pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,&gt;=0.14.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema&gt;=3.1.1-&gt;maggma&gt;=0.57.1-&gt;mp-api) (0.19.3)
Requirement already satisfied: contourpy&gt;=1.0.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (1.0.7)
Requirement already satisfied: cycler&gt;=0.10 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (0.11.0)
Requirement already satisfied: fonttools&gt;=4.22.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (4.39.4)
Requirement already satisfied: kiwisolver&gt;=1.0.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (1.4.4)
Requirement already satisfied: packaging&gt;=20.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (23.1)
Requirement already satisfied: pillow&gt;=6.2.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (9.5.0)
Requirement already satisfied: pyparsing&gt;=2.3.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (3.0.9)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: Click in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mongogrant&gt;=0.3.1-&gt;maggma&gt;=0.57.1-&gt;mp-api) (8.1.3)
Requirement already satisfied: Flask&gt;=1.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mongogrant&gt;=0.3.1-&gt;maggma&gt;=0.57.1-&gt;mp-api) (3.0.2)
Requirement already satisfied: sentinels in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mongomock&gt;=3.10.0-&gt;maggma&gt;=0.57.1-&gt;mp-api) (1.0.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: tenacity&gt;=6.2.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from plotly&gt;=4.5.0-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (8.2.2)
Requirement already satisfied: PyYAML&gt;=3.01 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pybtex~=0.24-&gt;emmet-core&gt;=0.78.0rc3-&gt;mp-api) (6.0)
Requirement already satisfied: latexcodec&gt;=1.0.4 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pybtex~=0.24-&gt;emmet-core&gt;=0.78.0rc3-&gt;mp-api) (2.0.1)
Requirement already satisfied: six in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pybtex~=0.24-&gt;emmet-core&gt;=0.78.0rc3-&gt;mp-api) (1.16.0)
Requirement already satisfied: annotated-types&gt;=0.4.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pydantic&gt;=2.0-&gt;emmet-core&gt;=0.78.0rc3-&gt;mp-api) (0.6.0)
Requirement already satisfied: pydantic-core==2.16.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pydantic&gt;=2.0-&gt;emmet-core&gt;=0.78.0rc3-&gt;mp-api) (2.16.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: python-dotenv&gt;=0.21.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pydantic-settings&gt;=2.0-&gt;emmet-core&gt;=0.78.0rc3-&gt;mp-api) (1.0.1)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: ruamel.yaml.clib&gt;=0.2.7 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ruamel.yaml&lt;0.18-&gt;maggma&gt;=0.57.1-&gt;mp-api) (0.2.8)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: paramiko&gt;=2.7.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from sshtunnel&gt;=0.1.5-&gt;maggma&gt;=0.57.1-&gt;mp-api) (3.4.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: future in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from uncertainties&gt;=3.1.4-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (0.18.3)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: h11&gt;=0.8 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from uvicorn&gt;=0.18.3-&gt;maggma&gt;=0.57.1-&gt;mp-api) (0.14.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: pytz&gt;=2020.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pandas-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (2023.3)
Requirement already satisfied: tzdata&gt;=2022.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pandas-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (2023.3)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: mpmath&gt;=0.19 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from sympy-&gt;pymatgen&gt;=2022.3.7-&gt;mp-api) (1.3.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: Werkzeug&gt;=3.0.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from Flask&gt;=1.0-&gt;mongogrant&gt;=0.3.1-&gt;maggma&gt;=0.57.1-&gt;mp-api) (3.0.1)
Requirement already satisfied: Jinja2&gt;=3.1.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from Flask&gt;=1.0-&gt;mongogrant&gt;=0.3.1-&gt;maggma&gt;=0.57.1-&gt;mp-api) (3.1.2)
Requirement already satisfied: itsdangerous&gt;=2.1.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from Flask&gt;=1.0-&gt;mongogrant&gt;=0.3.1-&gt;maggma&gt;=0.57.1-&gt;mp-api) (2.1.2)
Requirement already satisfied: blinker&gt;=1.6.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from Flask&gt;=1.0-&gt;mongogrant&gt;=0.3.1-&gt;maggma&gt;=0.57.1-&gt;mp-api) (1.7.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: bcrypt&gt;=3.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from paramiko&gt;=2.7.2-&gt;sshtunnel&gt;=0.1.5-&gt;maggma&gt;=0.57.1-&gt;mp-api) (4.1.2)
Requirement already satisfied: cryptography&gt;=3.3 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from paramiko&gt;=2.7.2-&gt;sshtunnel&gt;=0.1.5-&gt;maggma&gt;=0.57.1-&gt;mp-api) (40.0.2)
Requirement already satisfied: pynacl&gt;=1.5 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from paramiko&gt;=2.7.2-&gt;sshtunnel&gt;=0.1.5-&gt;maggma&gt;=0.57.1-&gt;mp-api) (1.5.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: anyio&lt;5,&gt;=3.4.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from starlette&lt;0.37.0,&gt;=0.36.3-&gt;fastapi&gt;=0.42.0-&gt;maggma&gt;=0.57.1-&gt;mp-api) (3.6.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: sniffio&gt;=1.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from anyio&lt;5,&gt;=3.4.0-&gt;starlette&lt;0.37.0,&gt;=0.36.3-&gt;fastapi&gt;=0.42.0-&gt;maggma&gt;=0.57.1-&gt;mp-api) (1.3.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: cffi&gt;=1.12 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from cryptography&gt;=3.3-&gt;paramiko&gt;=2.7.2-&gt;sshtunnel&gt;=0.1.5-&gt;maggma&gt;=0.57.1-&gt;mp-api) (1.15.1)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: MarkupSafe&gt;=2.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from Jinja2&gt;=3.1.2-&gt;Flask&gt;=1.0-&gt;mongogrant&gt;=0.3.1-&gt;maggma&gt;=0.57.1-&gt;mp-api) (2.1.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: pycparser in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from cffi&gt;=1.12-&gt;cryptography&gt;=3.3-&gt;paramiko&gt;=2.7.2-&gt;sshtunnel&gt;=0.1.5-&gt;maggma&gt;=0.57.1-&gt;mp-api) (2.21)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: mpcontribs-client in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (5.7.0)
Requirement already satisfied: boltons in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (23.1.1)
Requirement already satisfied: bravado in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (11.0.3)
Requirement already satisfied: filetype in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (1.2.0)
Requirement already satisfied: flatten-dict in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (0.4.2)
Requirement already satisfied: ipython in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (8.13.2)
Requirement already satisfied: json2html in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (1.3.0)
Requirement already satisfied: pandas in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (2.0.1)
Requirement already satisfied: pint&lt;0.20 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (0.19.2)
Requirement already satisfied: plotly in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (5.14.1)
Requirement already satisfied: pyIsEmail in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (2.0.1)
Requirement already satisfied: pymatgen in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (2024.2.8)
Requirement already satisfied: pymongo in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (4.6.1)
Requirement already satisfied: requests-futures in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (1.0.1)
Requirement already satisfied: swagger-spec-validator in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (3.0.3)
Requirement already satisfied: tqdm in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (4.66.2)
Requirement already satisfied: ujson in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (5.9.0)
Requirement already satisfied: semantic-version in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (2.10.0)
Requirement already satisfied: cachetools in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from mpcontribs-client) (5.3.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: bravado-core&gt;=5.16.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from bravado-&gt;mpcontribs-client) (6.1.1)
Requirement already satisfied: msgpack in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from bravado-&gt;mpcontribs-client) (1.0.7)
Requirement already satisfied: python-dateutil in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from bravado-&gt;mpcontribs-client) (2.8.2)
Requirement already satisfied: pyyaml in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from bravado-&gt;mpcontribs-client) (6.0)
Requirement already satisfied: requests&gt;=2.17 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from bravado-&gt;mpcontribs-client) (2.29.0)
Requirement already satisfied: six in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from bravado-&gt;mpcontribs-client) (1.16.0)
Requirement already satisfied: simplejson in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from bravado-&gt;mpcontribs-client) (3.19.2)
Requirement already satisfied: monotonic in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from bravado-&gt;mpcontribs-client) (1.6)
Requirement already satisfied: typing-extensions in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from bravado-&gt;mpcontribs-client) (4.9.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: backcall in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ipython-&gt;mpcontribs-client) (0.2.0)
Requirement already satisfied: decorator in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ipython-&gt;mpcontribs-client) (5.1.1)
Requirement already satisfied: jedi&gt;=0.16 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ipython-&gt;mpcontribs-client) (0.18.2)
Requirement already satisfied: matplotlib-inline in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ipython-&gt;mpcontribs-client) (0.1.6)
Requirement already satisfied: pickleshare in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ipython-&gt;mpcontribs-client) (0.7.5)
Requirement already satisfied: prompt-toolkit!=3.0.37,&lt;3.1.0,&gt;=3.0.30 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ipython-&gt;mpcontribs-client) (3.0.38)
Requirement already satisfied: pygments&gt;=2.4.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ipython-&gt;mpcontribs-client) (2.15.1)
Requirement already satisfied: stack-data in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ipython-&gt;mpcontribs-client) (0.6.2)
Requirement already satisfied: traitlets&gt;=5 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ipython-&gt;mpcontribs-client) (5.9.0)
Requirement already satisfied: pexpect&gt;4.3 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ipython-&gt;mpcontribs-client) (4.8.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: pytz&gt;=2020.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pandas-&gt;mpcontribs-client) (2023.3)
Requirement already satisfied: tzdata&gt;=2022.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pandas-&gt;mpcontribs-client) (2023.3)
Requirement already satisfied: numpy&gt;=1.21.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pandas-&gt;mpcontribs-client) (1.25.2)
Requirement already satisfied: tenacity&gt;=6.2.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from plotly-&gt;mpcontribs-client) (8.2.2)
Requirement already satisfied: packaging in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from plotly-&gt;mpcontribs-client) (23.1)
Requirement already satisfied: dnspython&gt;=2.0.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pyIsEmail-&gt;mpcontribs-client) (2.5.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: matplotlib&gt;=1.5 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (3.7.1)
Requirement already satisfied: monty&gt;=2024.2.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (2024.2.2)
Requirement already satisfied: networkx&gt;=2.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (3.2.1)
Requirement already satisfied: palettable&gt;=3.1.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (3.3.3)
Requirement already satisfied: pybtex in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (0.24.0)
Requirement already satisfied: ruamel.yaml&gt;=0.17.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (0.17.40)
Requirement already satisfied: scipy&gt;=1.5.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (1.9.2)
Requirement already satisfied: spglib&gt;=2.0.2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (2.3.1)
Requirement already satisfied: sympy in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (1.12)
Requirement already satisfied: tabulate in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (0.9.0)
Requirement already satisfied: uncertainties&gt;=3.1.4 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (3.1.7)
Requirement already satisfied: joblib in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pymatgen-&gt;mpcontribs-client) (1.3.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: jsonschema in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from swagger-spec-validator-&gt;mpcontribs-client) (4.17.3)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: jsonref in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from bravado-core&gt;=5.16.1-&gt;bravado-&gt;mpcontribs-client) (1.1.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: parso&lt;0.9.0,&gt;=0.8.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jedi&gt;=0.16-&gt;ipython-&gt;mpcontribs-client) (0.8.3)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: contourpy&gt;=1.0.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen-&gt;mpcontribs-client) (1.0.7)
Requirement already satisfied: cycler&gt;=0.10 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen-&gt;mpcontribs-client) (0.11.0)
Requirement already satisfied: fonttools&gt;=4.22.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen-&gt;mpcontribs-client) (4.39.4)
Requirement already satisfied: kiwisolver&gt;=1.0.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen-&gt;mpcontribs-client) (1.4.4)
Requirement already satisfied: pillow&gt;=6.2.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen-&gt;mpcontribs-client) (9.5.0)
Requirement already satisfied: pyparsing&gt;=2.3.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from matplotlib&gt;=1.5-&gt;pymatgen-&gt;mpcontribs-client) (3.0.9)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: ptyprocess&gt;=0.5 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pexpect&gt;4.3-&gt;ipython-&gt;mpcontribs-client) (0.7.0)
Requirement already satisfied: wcwidth in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from prompt-toolkit!=3.0.37,&lt;3.1.0,&gt;=3.0.30-&gt;ipython-&gt;mpcontribs-client) (0.2.6)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from requests&gt;=2.17-&gt;bravado-&gt;mpcontribs-client) (3.1.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: idna&lt;4,&gt;=2.5 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from requests&gt;=2.17-&gt;bravado-&gt;mpcontribs-client) (3.4)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from requests&gt;=2.17-&gt;bravado-&gt;mpcontribs-client) (1.26.15)
Requirement already satisfied: certifi&gt;=2017.4.17 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from requests&gt;=2.17-&gt;bravado-&gt;mpcontribs-client) (2023.7.22)
Requirement already satisfied: ruamel.yaml.clib&gt;=0.2.7 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from ruamel.yaml&gt;=0.17.0-&gt;pymatgen-&gt;mpcontribs-client) (0.2.8)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: future in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from uncertainties&gt;=3.1.4-&gt;pymatgen-&gt;mpcontribs-client) (0.18.3)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: attrs&gt;=17.4.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema-&gt;swagger-spec-validator-&gt;mpcontribs-client) (23.1.0)
Requirement already satisfied: pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,&gt;=0.14.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema-&gt;swagger-spec-validator-&gt;mpcontribs-client) (0.19.3)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: latexcodec&gt;=1.0.4 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from pybtex-&gt;pymatgen-&gt;mpcontribs-client) (2.0.1)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: executing&gt;=1.2.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from stack-data-&gt;ipython-&gt;mpcontribs-client) (1.2.0)
Requirement already satisfied: asttokens&gt;=2.1.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from stack-data-&gt;ipython-&gt;mpcontribs-client) (2.2.1)
Requirement already satisfied: pure-eval in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from stack-data-&gt;ipython-&gt;mpcontribs-client) (0.2.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: mpmath&gt;=0.19 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from sympy-&gt;pymatgen-&gt;mpcontribs-client) (1.3.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: fqdn in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema-&gt;swagger-spec-validator-&gt;mpcontribs-client) (1.5.1)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: isoduration in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema-&gt;swagger-spec-validator-&gt;mpcontribs-client) (20.11.0)
Requirement already satisfied: jsonpointer&gt;1.13 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema-&gt;swagger-spec-validator-&gt;mpcontribs-client) (2.3)
Requirement already satisfied: rfc3339-validator in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema-&gt;swagger-spec-validator-&gt;mpcontribs-client) (0.1.4)
Requirement already satisfied: rfc3986-validator&gt;0.1.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema-&gt;swagger-spec-validator-&gt;mpcontribs-client) (0.1.1)
Requirement already satisfied: uri-template in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema-&gt;swagger-spec-validator-&gt;mpcontribs-client) (1.2.0)
Requirement already satisfied: webcolors&gt;=1.11 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from jsonschema-&gt;swagger-spec-validator-&gt;mpcontribs-client) (1.13)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: arrow&gt;=0.15.0 in /home/cd96/psi4conda/envs/jbook/lib/python3.11/site-packages (from isoduration-&gt;jsonschema-&gt;swagger-spec-validator-&gt;mpcontribs-client) (1.2.3)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting crystal-toolkit
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Using cached crystal_toolkit-2023.11.3-py3-none-any.whl (15.9 MB)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting crystaltoolkit-extension (from crystal-toolkit)
  Using cached crystaltoolkit-extension-0.6.0.tar.gz (2.9 MB)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Installing build dependencies ... ?25l-
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> /
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> \
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> |
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>^C
?25h canceled
<span class=" -Color -Color-Red">ERROR: Operation cancelled by user</span>

</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting dash
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Downloading dash-2.15.0-py3-none-any.whl (10.2 MB)
?25l     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">0.0/10.2 MB</span> <span class=" -Color -Color-Red">?</span> eta <span class=" -Color -Color-Cyan">-:--:--</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">0.1/10.2 MB</span> <span class=" -Color -Color-Red">3.1 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:04</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">0.3/10.2 MB</span> <span class=" -Color -Color-Red">5.1 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:02</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">0.6/10.2 MB</span> <span class=" -Color -Color-Red">6.1 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:02</span>
     ━━╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">0.6/10.2 MB</span> <span class=" -Color -Color-Red">6.1 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:02</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">0.6/10.2 MB</span> <span class=" -Color -Color-Red">6.1 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:02</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━╸━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">0.9/10.2 MB</span> <span class=" -Color -Color-Red">5.0 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:02</span>
     ━━━━━╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">1.4/10.2 MB</span> <span class=" -Color -Color-Red">5.5 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:02</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━╸━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">1.7/10.2 MB</span> <span class=" -Color -Color-Red">6.0 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:02</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">2.2/10.2 MB</span> <span class=" -Color -Color-Red">6.9 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:02</span>
     ━━━━━━━━━╸━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">2.5/10.2 MB</span> <span class=" -Color -Color-Red">7.3 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:02</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━╺━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">2.9/10.2 MB</span> <span class=" -Color -Color-Red">7.6 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━╺━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">3.4/10.2 MB</span> <span class=" -Color -Color-Red">8.0 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
     ━━━━━━━━━━━━━━╸━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">3.8/10.2 MB</span> <span class=" -Color -Color-Red">8.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━╸━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">4.2/10.2 MB</span> <span class=" -Color -Color-Red">8.7 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━╺━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">4.6/10.2 MB</span> <span class=" -Color -Color-Red">8.8 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
     ━━━━━━━━━━━━━━━━━━━╸━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">5.0/10.2 MB</span> <span class=" -Color -Color-Red">8.9 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━╸━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">5.5/10.2 MB</span> <span class=" -Color -Color-Red">9.2 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━╺━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">5.9/10.2 MB</span> <span class=" -Color -Color-Red">9.3 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
     ━━━━━━━━━━━━━━━━━━━━━━━━╸━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">6.3/10.2 MB</span> <span class=" -Color -Color-Red">9.5 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━╸━━━━━━━━━━━━━ <span class=" -Color -Color-Green">6.8/10.2 MB</span> <span class=" -Color -Color-Red">9.7 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸━━━━━━━━━━━ <span class=" -Color -Color-Green">7.4/10.2 MB</span> <span class=" -Color -Color-Red">10.0 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╺━━━━━━━━━━ <span class=" -Color -Color-Green">7.5/10.2 MB</span> <span class=" -Color -Color-Red">10.0 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╺━━━━━━━━ <span class=" -Color -Color-Green">8.0/10.2 MB</span> <span class=" -Color -Color-Red">9.9 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╺━━━━━━ <span class=" -Color -Color-Green">8.5/10.2 MB</span> <span class=" -Color -Color-Red">10.1 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸━━━━━ <span class=" -Color -Color-Green">8.9/10.2 MB</span> <span class=" -Color -Color-Red">10.1 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╺━━━ <span class=" -Color -Color-Green">9.2/10.2 MB</span> <span class=" -Color -Color-Red">10.1 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸━━ <span class=" -Color -Color-Green">9.7/10.2 MB</span> <span class=" -Color -Color-Red">10.2 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">10.2/10.2 MB</span> <span class=" -Color -Color-Red">10.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">10.2/10.2 MB</span> <span class=" -Color -Color-Red">10.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">10.2/10.2 MB</span> <span class=" -Color -Color-Red">10.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">10.2/10.2 MB</span> <span class=" -Color -Color-Red">10.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">10.2/10.2 MB</span> <span class=" -Color -Color-Red">10.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">10.2/10.2 MB</span> <span class=" -Color -Color-Red">10.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="kn">import</span> <span class="n">interact</span><span class="p">,</span> <span class="n">Dropdown</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">pymatgen.io.cif</span> <span class="kn">import</span> <span class="n">CifWriter</span>
<span class="kn">import</span> <span class="nn">nglview</span> <span class="k">as</span> <span class="nn">nv</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">mp_api.client</span> <span class="kn">import</span> <span class="n">MPRester</span>
<span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">emmet.core.summary</span> <span class="kn">import</span> <span class="n">HasProps</span>
<span class="kn">from</span> <span class="nn">nglview</span> <span class="kn">import</span> <span class="n">show_structure_file</span>
<span class="kn">from</span> <span class="nn">pymatgen.io.cif</span> <span class="kn">import</span> <span class="n">CifWriter</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mp_api.client</span> <span class="kn">import</span> <span class="n">MPRester</span>

<span class="k">with</span> <span class="n">MPRester</span><span class="p">(</span><span class="s2">&quot;A55hSVu7NuwvlISilTvVtw37IB5ES26w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">mpr</span><span class="p">:</span>
    <span class="n">ph_bs</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_phonon_bandstructure_by_material_id</span><span class="p">(</span><span class="s2">&quot;mp-149&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "e56666f22c6d42c9b0de18f7b43ff225", "version_major": 2, "version_minor": 0}</script><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Red">---------------------------------------------------------------------------</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">MPRestError</span>                               Traceback (most recent call last)
File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:1001</span>, in <span class=" -Color -Color-Cyan">BaseRester.get_data_by_id</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, document_id, fields)</span>
<span class=" -Color -Color-Green">   1000</span> <span class=" -Color -Color-Bold -Color-Bold-C28">try</span>:
<span class=" -Color -Color-Bold -Color-Bold-Green">-&gt; 1001</span>     results <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_query_resource_data(criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria, fields</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">fields, suburl</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">document_id)</span>  <span class=" -Color -Color-C66"># type: ignore</span>
<span class=" -Color -Color-Green">   1002</span> <span class=" -Color -Color-Bold -Color-Bold-C28">except</span> MPRestError:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:958</span>, in <span class=" -Color -Color-Cyan">BaseRester._query_resource_data</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, criteria, fields, suburl, use_document_model, timeout)</span>
<span class=" -Color -Color-Green">    945</span> <span class=" -Color -Color-C124">&quot;&quot;&quot;Query the endpoint for a list of documents without associated meta information. Only</span>
<span class=" -Color -Color-Green">    946</span> <span class=" -Color -Color-C124">returns a single page of results.</span>
<span class=" -Color -Color-Green">    947</span> 
<span class=" -Color -Color-Bold -Color-Bold-Green">   (...)</span>
<span class=" -Color -Color-Green">    956</span> <span class=" -Color -Color-C124">    A list of documents</span>
<span class=" -Color -Color-Green">    957</span> <span class=" -Color -Color-C124">&quot;&quot;&quot;</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 958</span> <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_query_resource(  </span><span class=" -Color -Color-C66 -Color-C66-BGYellow"># type: ignore</span>
<span class=" -Color -Color-Green">    959</span> <span class=" -Color -Color-BGYellow">    criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria,</span>
<span class=" -Color -Color-Green">    960</span> <span class=" -Color -Color-BGYellow">    fields</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">fields,</span>
<span class=" -Color -Color-Green">    961</span> <span class=" -Color -Color-BGYellow">    suburl</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">suburl,</span>
<span class=" -Color -Color-Green">    962</span> <span class=" -Color -Color-BGYellow">    use_document_model</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">use_document_model,</span>
<span class=" -Color -Color-Green">    963</span> <span class=" -Color -Color-BGYellow">    chunk_size</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=1000</span><span class=" -Color -Color-BGYellow">,</span>
<span class=" -Color -Color-Green">    964</span> <span class=" -Color -Color-BGYellow">    num_chunks</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=1</span><span class=" -Color -Color-BGYellow">,</span>
<span class=" -Color -Color-Green">    965</span> <span class=" -Color -Color-BGYellow">)</span><span class=" -Color -Color-C241">.</span>get(<span class=" -Color -Color-C124">&quot;data&quot;</span>)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:408</span>, in <span class=" -Color -Color-Cyan">BaseRester._query_resource</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, criteria, fields, suburl, use_document_model, parallel_param, num_chunks, chunk_size, timeout)</span>
<span class=" -Color -Color-Green">    406</span>         url <span class=" -Color -Color-C241">+=</span> <span class=" -Color -Color-C124">&quot;/&quot;</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 408</span> data <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_submit_requests(</span>
<span class=" -Color -Color-Green">    409</span> <span class=" -Color -Color-BGYellow">    url</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">url,</span>
<span class=" -Color -Color-Green">    410</span> <span class=" -Color -Color-BGYellow">    criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria,</span>
<span class=" -Color -Color-Green">    411</span> <span class=" -Color -Color-BGYellow">    use_document_model</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">use_document_model,</span>
<span class=" -Color -Color-Green">    412</span> <span class=" -Color -Color-BGYellow">    parallel_param</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">parallel_param,</span>
<span class=" -Color -Color-Green">    413</span> <span class=" -Color -Color-BGYellow">    num_chunks</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">num_chunks,</span>
<span class=" -Color -Color-Green">    414</span> <span class=" -Color -Color-BGYellow">    chunk_size</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">chunk_size,</span>
<span class=" -Color -Color-Green">    415</span> <span class=" -Color -Color-BGYellow">    timeout</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">timeout,</span>
<span class=" -Color -Color-Green">    416</span> <span class=" -Color -Color-BGYellow">)</span>
<span class=" -Color -Color-Green">    418</span> <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> data

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:549</span>, in <span class=" -Color -Color-Cyan">BaseRester._submit_requests</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, url, criteria, use_document_model, parallel_param, num_chunks, chunk_size, timeout)</span>
<span class=" -Color -Color-Green">    545</span> initial_params_list <span class=" -Color -Color-C241">=</span> [
<span class=" -Color -Color-Green">    546</span>     {<span class=" -Color -Color-C124">&quot;url&quot;</span>: url, <span class=" -Color -Color-C124">&quot;verify&quot;</span>: <span class=" -Color -Color-Bold -Color-Bold-C28">True</span>, <span class=" -Color -Color-C124">&quot;params&quot;</span>: copy(crit)} <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> crit <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> new_criteria
<span class=" -Color -Color-Green">    547</span> ]
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 549</span> initial_data_tuples <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_multi_thread(</span>
<span class=" -Color -Color-Green">    550</span> <span class=" -Color -Color-BGYellow">    use_document_model, initial_params_list</span>
<span class=" -Color -Color-Green">    551</span> <span class=" -Color -Color-BGYellow">)</span>
<span class=" -Color -Color-Green">    553</span> <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> data, subtotal, crit_ind <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> initial_data_tuples:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:763</span>, in <span class=" -Color -Color-Cyan">BaseRester._multi_thread</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, use_document_model, params_list, progress_bar, timeout)</span>
<span class=" -Color -Color-Green">    762</span> <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> future <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> finished:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 763</span>     data, subtotal <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-BGYellow">future</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">result()</span>
<span class=" -Color -Color-Green">    765</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> progress_bar <span class=" -Color -Color-Bold -Color-Bold-C129">is</span> <span class=" -Color -Color-Bold -Color-Bold-C129">not</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\_base.py:437</span>, in <span class=" -Color -Color-Cyan">Future.result</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, timeout)</span>
<span class=" -Color -Color-Green">    436</span> <span class=" -Color -Color-Bold -Color-Bold-C28">elif</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_state <span class=" -Color -Color-C241">==</span> FINISHED:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 437</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">__get_result()</span>
<span class=" -Color -Color-Green">    439</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_condition<span class=" -Color -Color-C241">.</span>wait(timeout)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\_base.py:389</span>, in <span class=" -Color -Color-Cyan">Future.__get_result</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self)</span>
<span class=" -Color -Color-Green">    388</span> <span class=" -Color -Color-Bold -Color-Bold-C28">try</span>:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 389</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_exception
<span class=" -Color -Color-Green">    390</span> <span class=" -Color -Color-Bold -Color-Bold-C28">finally</span>:
<span class=" -Color -Color-Green">    391</span>     <span class=" -Color -Color-C66"># Break a reference cycle with the exception in self._exception</span>

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\thread.py:57</span>, in <span class=" -Color -Color-Cyan">_WorkItem.run</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self)</span>
<span class=" -Color -Color-Green">     56</span> <span class=" -Color -Color-Bold -Color-Bold-C28">try</span>:
<span class=" -Color -Color-Bold -Color-Bold-Green">---&gt; 57</span>     result <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">fn(</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">*</span><span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">args, </span><span class=" -Color -Color-C241 -Color-C241-BGYellow">**</span><span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">kwargs)</span>
<span class=" -Color -Color-Green">     58</span> <span class=" -Color -Color-Bold -Color-Bold-C28">except</span> <span class=" -Color -Color-Bold -Color-Bold-C167">BaseException</span> <span class=" -Color -Color-Bold -Color-Bold-C28">as</span> exc:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:870</span>, in <span class=" -Color -Color-Cyan">BaseRester._submit_request_and_process</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, url, verify, params, use_document_model, timeout)</span>
<span class=" -Color -Color-Green">    868</span>         message <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28">str</span>(data)
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 870</span> <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> MPRestError(
<span class=" -Color -Color-Green">    871</span>     <span class=" -Color -Color-C124">f&quot;REST query returned with error status code </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>response<span class=" -Color -Color-C241">.</span>status_code<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> &quot;</span>
<span class=" -Color -Color-Green">    872</span>     <span class=" -Color -Color-C124">f&quot;on URL </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>response<span class=" -Color -Color-C241">.</span>url<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> with message:</span><span class=" -Color -Color-Bold -Color-Bold-C130">\n</span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>message<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124">&quot;</span>
<span class=" -Color -Color-Green">    873</span> )

<span class=" -Color -Color-Bold -Color-Bold-Red">MPRestError</span>: REST query returned with error status code 404 on URL https://api.materialsproject.org/materials/phonon/mp-149/?_limit=1&amp;_fields=ph_bs with message:
Not Found

During handling of the above exception, another exception occurred:

<span class=" -Color -Color-Bold -Color-Bold-Red">MPRestError</span>                               Traceback (most recent call last)
Input <span class=" -Color -Color-Bold -Color-Bold-Green">In [15]</span>, in <span class=" -Color -Color-Cyan">&lt;cell line: 3&gt;</span><span class=" -Color -Color-Bold -Color-Bold-Blue">()</span>
<span class=" -Color -Color-Green">      1</span> <span class=" -Color -Color-Bold -Color-Bold-C28">from</span> <span class=" -Color -Color-Bold -Color-Bold-C21">mp_api.client</span> <span class=" -Color -Color-Bold -Color-Bold-C28">import</span> MPRester
<span class=" -Color -Color-Green">      3</span> <span class=" -Color -Color-Bold -Color-Bold-C28">with</span> MPRester(<span class=" -Color -Color-C124">&quot;A55hSVu7NuwvlISilTvVtw37IB5ES26w&quot;</span>) <span class=" -Color -Color-Bold -Color-Bold-C28">as</span> mpr:
<span class=" -Color -Color-Bold -Color-Bold-Green">----&gt; 4</span>     ph_bs <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-BGYellow">mpr</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">get_phonon_bandstructure_by_material_id(</span><span class=" -Color -Color-C124 -Color-C124-BGYellow">&quot;mp-149&quot;</span><span class=" -Color -Color-BGYellow">)</span>

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\mprester.py:1222</span>, in <span class=" -Color -Color-Cyan">MPRester.get_phonon_bandstructure_by_material_id</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, material_id)</span>
<span class=" -Color -Color-Green">   1213</span> <span class=" -Color -Color-Bold -Color-Bold-C28">def</span> <span class=" -Color -Color-C21">get_phonon_bandstructure_by_material_id</span>(<span class=" -Color -Color-C28">self</span>, material_id: <span class=" -Color -Color-C28">str</span>):
<span class=" -Color -Color-Green">   1214</span> <span class=" -Color -Color-C250">    </span><span class=" -Color -Color-C124">&quot;&quot;&quot;Get phonon dispersion data corresponding to a material_id.</span>
<span class=" -Color -Color-Green">   1215</span> 
<span class=" -Color -Color-Green">   1216</span> <span class=" -Color -Color-C124">    Args:</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">   (...)</span>
<span class=" -Color -Color-Green">   1220</span> <span class=" -Color -Color-C124">        PhononBandStructureSymmLine:  phonon band structure.</span>
<span class=" -Color -Color-Green">   1221</span> <span class=" -Color -Color-C124">    &quot;&quot;&quot;</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">-&gt; 1222</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">phonon</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">get_data_by_id(material_id, fields</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">[</span><span class=" -Color -Color-C124 -Color-C124-BGYellow">&quot;ph_bs&quot;</span><span class=" -Color -Color-BGYellow">])</span><span class=" -Color -Color-C241">.</span>ph_bs

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:1027</span>, in <span class=" -Color -Color-Cyan">BaseRester.get_data_by_id</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, document_id, fields)</span>
<span class=" -Color -Color-Green">   1021</span>             <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> new_document_id <span class=" -Color -Color-Bold -Color-Bold-C129">is</span> <span class=" -Color -Color-Bold -Color-Bold-C129">not</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>:
<span class=" -Color -Color-Green">   1022</span>                 warnings<span class=" -Color -Color-C241">.</span>warn(
<span class=" -Color -Color-Green">   1023</span>                     <span class=" -Color -Color-C124">f&quot;Document primary key has changed from </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>document_id<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> to </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>new_document_id<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124">, &quot;</span>
<span class=" -Color -Color-Green">   1024</span>                     <span class=" -Color -Color-C124">f&quot;returning data for </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>new_document_id<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> in </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span><span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>suffix<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> route.    &quot;</span>
<span class=" -Color -Color-Green">   1025</span>                 )
<span class=" -Color -Color-Bold -Color-Bold-Green">-&gt; 1027</span>                 results <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_query_resource_data(</span>
<span class=" -Color -Color-Green">   1028</span> <span class=" -Color -Color-BGYellow">                    criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria, fields</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">fields, suburl</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">new_document_id  </span><span class=" -Color -Color-C66 -Color-C66-BGYellow"># type: ignore</span>
<span class=" -Color -Color-Green">   1029</span> <span class=" -Color -Color-BGYellow">                )</span>
<span class=" -Color -Color-Green">   1031</span> <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> <span class=" -Color -Color-Bold -Color-Bold-C129">not</span> results:
<span class=" -Color -Color-Green">   1032</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> MPRestError(<span class=" -Color -Color-C124">f&quot;No result for record </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>document_id<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124">.&quot;</span>)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:958</span>, in <span class=" -Color -Color-Cyan">BaseRester._query_resource_data</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, criteria, fields, suburl, use_document_model, timeout)</span>
<span class=" -Color -Color-Green">    937</span> <span class=" -Color -Color-Bold -Color-Bold-C28">def</span> <span class=" -Color -Color-C21">_query_resource_data</span>(
<span class=" -Color -Color-Green">    938</span>     <span class=" -Color -Color-C28">self</span>,
<span class=" -Color -Color-Green">    939</span>     criteria: <span class=" -Color -Color-C28">dict</span> <span class=" -Color -Color-C241">|</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span> <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>,
<span class=" -Color -Color-Bold -Color-Bold-Green">   (...)</span>
<span class=" -Color -Color-Green">    943</span>     timeout: <span class=" -Color -Color-C28">int</span> <span class=" -Color -Color-C241">|</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span> <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>,
<span class=" -Color -Color-Green">    944</span> ) <span class=" -Color -Color-C241">-&gt;</span> <span class=" -Color -Color-C28">list</span>[T] <span class=" -Color -Color-C241">|</span> <span class=" -Color -Color-C28">list</span>[<span class=" -Color -Color-C28">dict</span>]:
<span class=" -Color -Color-Green">    945</span> <span class=" -Color -Color-C250">    </span><span class=" -Color -Color-C124">&quot;&quot;&quot;Query the endpoint for a list of documents without associated meta information. Only</span>
<span class=" -Color -Color-Green">    946</span> <span class=" -Color -Color-C124">    returns a single page of results.</span>
<span class=" -Color -Color-Green">    947</span> 
<span class=" -Color -Color-Bold -Color-Bold-Green">   (...)</span>
<span class=" -Color -Color-Green">    956</span> <span class=" -Color -Color-C124">        A list of documents</span>
<span class=" -Color -Color-Green">    957</span> <span class=" -Color -Color-C124">    &quot;&quot;&quot;</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 958</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_query_resource(  </span><span class=" -Color -Color-C66 -Color-C66-BGYellow"># type: ignore</span>
<span class=" -Color -Color-Green">    959</span> <span class=" -Color -Color-BGYellow">        criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria,</span>
<span class=" -Color -Color-Green">    960</span> <span class=" -Color -Color-BGYellow">        fields</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">fields,</span>
<span class=" -Color -Color-Green">    961</span> <span class=" -Color -Color-BGYellow">        suburl</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">suburl,</span>
<span class=" -Color -Color-Green">    962</span> <span class=" -Color -Color-BGYellow">        use_document_model</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">use_document_model,</span>
<span class=" -Color -Color-Green">    963</span> <span class=" -Color -Color-BGYellow">        chunk_size</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=1000</span><span class=" -Color -Color-BGYellow">,</span>
<span class=" -Color -Color-Green">    964</span> <span class=" -Color -Color-BGYellow">        num_chunks</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=1</span><span class=" -Color -Color-BGYellow">,</span>
<span class=" -Color -Color-Green">    965</span> <span class=" -Color -Color-BGYellow">    )</span><span class=" -Color -Color-C241">.</span>get(<span class=" -Color -Color-C124">&quot;data&quot;</span>)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:408</span>, in <span class=" -Color -Color-Cyan">BaseRester._query_resource</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, criteria, fields, suburl, use_document_model, parallel_param, num_chunks, chunk_size, timeout)</span>
<span class=" -Color -Color-Green">    405</span>         <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> <span class=" -Color -Color-Bold -Color-Bold-C129">not</span> url<span class=" -Color -Color-C241">.</span>endswith(<span class=" -Color -Color-C124">&quot;/&quot;</span>):
<span class=" -Color -Color-Green">    406</span>             url <span class=" -Color -Color-C241">+=</span> <span class=" -Color -Color-C124">&quot;/&quot;</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 408</span>     data <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_submit_requests(</span>
<span class=" -Color -Color-Green">    409</span> <span class=" -Color -Color-BGYellow">        url</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">url,</span>
<span class=" -Color -Color-Green">    410</span> <span class=" -Color -Color-BGYellow">        criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria,</span>
<span class=" -Color -Color-Green">    411</span> <span class=" -Color -Color-BGYellow">        use_document_model</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">use_document_model,</span>
<span class=" -Color -Color-Green">    412</span> <span class=" -Color -Color-BGYellow">        parallel_param</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">parallel_param,</span>
<span class=" -Color -Color-Green">    413</span> <span class=" -Color -Color-BGYellow">        num_chunks</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">num_chunks,</span>
<span class=" -Color -Color-Green">    414</span> <span class=" -Color -Color-BGYellow">        chunk_size</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">chunk_size,</span>
<span class=" -Color -Color-Green">    415</span> <span class=" -Color -Color-BGYellow">        timeout</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">timeout,</span>
<span class=" -Color -Color-Green">    416</span> <span class=" -Color -Color-BGYellow">    )</span>
<span class=" -Color -Color-Green">    418</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> data
<span class=" -Color -Color-Green">    420</span> <span class=" -Color -Color-Bold -Color-Bold-C28">except</span> RequestException <span class=" -Color -Color-Bold -Color-Bold-C28">as</span> ex:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:549</span>, in <span class=" -Color -Color-Cyan">BaseRester._submit_requests</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, url, criteria, use_document_model, parallel_param, num_chunks, chunk_size, timeout)</span>
<span class=" -Color -Color-Green">    543</span> remaining_docs_avail <span class=" -Color -Color-C241">=</span> {}
<span class=" -Color -Color-Green">    545</span> initial_params_list <span class=" -Color -Color-C241">=</span> [
<span class=" -Color -Color-Green">    546</span>     {<span class=" -Color -Color-C124">&quot;url&quot;</span>: url, <span class=" -Color -Color-C124">&quot;verify&quot;</span>: <span class=" -Color -Color-Bold -Color-Bold-C28">True</span>, <span class=" -Color -Color-C124">&quot;params&quot;</span>: copy(crit)} <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> crit <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> new_criteria
<span class=" -Color -Color-Green">    547</span> ]
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 549</span> initial_data_tuples <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_multi_thread(</span>
<span class=" -Color -Color-Green">    550</span> <span class=" -Color -Color-BGYellow">    use_document_model, initial_params_list</span>
<span class=" -Color -Color-Green">    551</span> <span class=" -Color -Color-BGYellow">)</span>
<span class=" -Color -Color-Green">    553</span> <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> data, subtotal, crit_ind <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> initial_data_tuples:
<span class=" -Color -Color-Green">    554</span>     subtotals<span class=" -Color -Color-C241">.</span>append(subtotal)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:763</span>, in <span class=" -Color -Color-Cyan">BaseRester._multi_thread</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, use_document_model, params_list, progress_bar, timeout)</span>
<span class=" -Color -Color-Green">    760</span> finished, futures <span class=" -Color -Color-C241">=</span> wait(futures, return_when<span class=" -Color -Color-C241">=</span>FIRST_COMPLETED)
<span class=" -Color -Color-Green">    762</span> <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> future <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> finished:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 763</span>     data, subtotal <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-BGYellow">future</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">result()</span>
<span class=" -Color -Color-Green">    765</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> progress_bar <span class=" -Color -Color-Bold -Color-Bold-C129">is</span> <span class=" -Color -Color-Bold -Color-Bold-C129">not</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>:
<span class=" -Color -Color-Green">    766</span>         progress_bar<span class=" -Color -Color-C241">.</span>update(<span class=" -Color -Color-C28">len</span>(data[<span class=" -Color -Color-C124">&quot;data&quot;</span>]))

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\_base.py:437</span>, in <span class=" -Color -Color-Cyan">Future.result</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, timeout)</span>
<span class=" -Color -Color-Green">    435</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> CancelledError()
<span class=" -Color -Color-Green">    436</span> <span class=" -Color -Color-Bold -Color-Bold-C28">elif</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_state <span class=" -Color -Color-C241">==</span> FINISHED:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 437</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">__get_result()</span>
<span class=" -Color -Color-Green">    439</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_condition<span class=" -Color -Color-C241">.</span>wait(timeout)
<span class=" -Color -Color-Green">    441</span> <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_state <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> [CANCELLED, CANCELLED_AND_NOTIFIED]:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\_base.py:389</span>, in <span class=" -Color -Color-Cyan">Future.__get_result</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self)</span>
<span class=" -Color -Color-Green">    387</span> <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_exception:
<span class=" -Color -Color-Green">    388</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">try</span>:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 389</span>         <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_exception
<span class=" -Color -Color-Green">    390</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">finally</span>:
<span class=" -Color -Color-Green">    391</span>         <span class=" -Color -Color-C66"># Break a reference cycle with the exception in self._exception</span>
<span class=" -Color -Color-Green">    392</span>         <span class=" -Color -Color-C28">self</span> <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\thread.py:57</span>, in <span class=" -Color -Color-Cyan">_WorkItem.run</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self)</span>
<span class=" -Color -Color-Green">     54</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span>
<span class=" -Color -Color-Green">     56</span> <span class=" -Color -Color-Bold -Color-Bold-C28">try</span>:
<span class=" -Color -Color-Bold -Color-Bold-Green">---&gt; 57</span>     result <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">fn(</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">*</span><span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">args, </span><span class=" -Color -Color-C241 -Color-C241-BGYellow">**</span><span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">kwargs)</span>
<span class=" -Color -Color-Green">     58</span> <span class=" -Color -Color-Bold -Color-Bold-C28">except</span> <span class=" -Color -Color-Bold -Color-Bold-C167">BaseException</span> <span class=" -Color -Color-Bold -Color-Bold-C28">as</span> exc:
<span class=" -Color -Color-Green">     59</span>     <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>future<span class=" -Color -Color-C241">.</span>set_exception(exc)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:870</span>, in <span class=" -Color -Color-Cyan">BaseRester._submit_request_and_process</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, url, verify, params, use_document_model, timeout)</span>
<span class=" -Color -Color-Green">    867</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">except</span> (<span class=" -Color -Color-Bold -Color-Bold-C167">KeyError</span>, <span class=" -Color -Color-Bold -Color-Bold-C167">IndexError</span>):
<span class=" -Color -Color-Green">    868</span>         message <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28">str</span>(data)
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 870</span> <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> MPRestError(
<span class=" -Color -Color-Green">    871</span>     <span class=" -Color -Color-C124">f&quot;REST query returned with error status code </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>response<span class=" -Color -Color-C241">.</span>status_code<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> &quot;</span>
<span class=" -Color -Color-Green">    872</span>     <span class=" -Color -Color-C124">f&quot;on URL </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>response<span class=" -Color -Color-C241">.</span>url<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> with message:</span><span class=" -Color -Color-Bold -Color-Bold-C130">\n</span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>message<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124">&quot;</span>
<span class=" -Color -Color-Green">    873</span> )

<span class=" -Color -Color-Bold -Color-Bold-Red">MPRestError</span>: REST query returned with error status code 404 on URL https://api.materialsproject.org/materials/phonon/mp-149/?_limit=1&amp;_fields=ph_bs with message:
Not Found
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="example-for-tio-2-rutile">
<h1>Example for <span class="math notranslate nohighlight">\(TiO_2 - rutile\)</span><a class="headerlink" href="#example-for-tio-2-rutile" title="Permalink to this heading">#</a></h1>
<p>In the folowing example we took the resulting frequencies from the phonon dispersion at the so called <span class="math notranslate nohighlight">\(\Gamma\)</span> point, which is the the symmetric point found at <span class="math notranslate nohighlight">\(\hat{R}= 0 \hat{h} + 0 \hat{l} + 0 \hat{k}\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Here you can insert the materials project ID</span>
<span class="n">material_id</span> <span class="o">=</span> <span class="s2">&quot;mp-2657&quot;</span>

<span class="c1"># This API key can be requested in the website: https://next-gen.materialsproject.org/api</span>
<span class="n">API_key</span>     <span class="o">=</span> <span class="s2">&quot;A55hSVu7NuwvlISilTvVtw37IB5ES26w&quot;</span>


<span class="k">def</span> <span class="nf">plot_phonon_and_structure</span><span class="p">(</span><span class="n">material_id</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">MPRester</span><span class="p">(</span><span class="n">API_key</span><span class="p">)</span> <span class="k">as</span> <span class="n">mpr</span><span class="p">:</span>
        <span class="n">ph_bs</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_phonon_bandstructure_by_material_id</span><span class="p">(</span><span class="n">material_id</span><span class="p">)</span>
        <span class="n">ph_dos</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_phonon_dos_by_material_id</span><span class="p">(</span><span class="n">material_id</span><span class="p">)</span>
        <span class="n">structure</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_structure_by_material_id</span><span class="p">(</span><span class="n">material_id</span><span class="p">)</span>

    <span class="n">position</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">label</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ph_bs</span><span class="o">.</span><span class="n">as_phononwebsite</span><span class="p">()[</span><span class="s2">&quot;line_breaks&quot;</span><span class="p">]:</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ph_bs</span><span class="o">.</span><span class="n">as_phononwebsite</span><span class="p">()[</span><span class="s2">&quot;highsym_qpts&quot;</span><span class="p">]:</span>
        <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">label</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;$&quot;</span> <span class="o">+</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;$&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">structure</span><span class="p">)</span>
    <span class="n">cif_filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;material_structure_</span><span class="si">{</span><span class="n">material_id</span><span class="si">}</span><span class="s2">.cif&quot;</span>  <span class="c1"># Name of the output CIF file</span>

    <span class="n">cif_writer</span> <span class="o">=</span> <span class="n">CifWriter</span><span class="p">(</span><span class="n">structure</span><span class="p">)</span>
    <span class="n">cif_writer</span><span class="o">.</span><span class="n">write_file</span><span class="p">(</span><span class="n">cif_filename</span><span class="p">)</span>
    <span class="n">struct_file</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">FileStructure</span><span class="p">(</span><span class="n">cif_filename</span><span class="p">)</span>
    
    <span class="n">view</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">show_file</span><span class="p">(</span><span class="n">struct_file</span><span class="p">)</span>
    <span class="n">view</span><span class="o">.</span><span class="n">_remote_call</span><span class="p">(</span><span class="s2">&quot;setSize&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;300px&quot;</span><span class="p">])</span>
    <span class="n">view</span><span class="o">.</span><span class="n">camera</span> <span class="o">=</span> <span class="s2">&quot;orthographic&quot;</span>
    <span class="n">view</span><span class="o">.</span><span class="n">add_unitcell</span><span class="p">()</span>
    <span class="n">view</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;wspace&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s1">&#39;hspace&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;width_ratios&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ph_bs</span><span class="o">.</span><span class="n">as_phononwebsite</span><span class="p">()[</span><span class="s2">&quot;eigenvalues&quot;</span><span class="p">])</span>
    <span class="n">density_points</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ph_dos</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()[</span><span class="s2">&quot;densities&quot;</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">density_points</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
    <span class="c1"># print(&quot;here : &quot;, position, label)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span> <span class="n">position</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Frequency [$cm^{-1}$]&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;K  [$\frac{2\pi}</span><span class="si">{a}</span><span class="s2">$]&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;DOS&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>

    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ph_dos</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()[</span><span class="s2">&quot;densities&quot;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">density_points</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">density_points</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">view</span>
<span class="n">plot_phonon_and_structure</span><span class="p">(</span><span class="n">material_id</span><span class="p">)</span>
    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The server does not support the request made to https://api.materialsproject.org/materials/phonon/mp-2657/?_limit=1&amp;_fields=ph_bs. This may be due to an outdated mp-api package, or a problem with the query.
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "f8c7710883ee4b1abac686ac979df2e8", "version_major": 2, "version_minor": 0}</script><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Document primary key has changed from mp-2657 to mp-2657, returning data for mp-2657 in materials/phonon route.    
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Red">---------------------------------------------------------------------------</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">MPRestError</span>                               Traceback (most recent call last)
File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:1001</span>, in <span class=" -Color -Color-Cyan">BaseRester.get_data_by_id</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, document_id, fields)</span>
<span class=" -Color -Color-Green">   1000</span> <span class=" -Color -Color-Bold -Color-Bold-C28">try</span>:
<span class=" -Color -Color-Bold -Color-Bold-Green">-&gt; 1001</span>     results <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_query_resource_data(criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria, fields</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">fields, suburl</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">document_id)</span>  <span class=" -Color -Color-C66"># type: ignore</span>
<span class=" -Color -Color-Green">   1002</span> <span class=" -Color -Color-Bold -Color-Bold-C28">except</span> MPRestError:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:958</span>, in <span class=" -Color -Color-Cyan">BaseRester._query_resource_data</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, criteria, fields, suburl, use_document_model, timeout)</span>
<span class=" -Color -Color-Green">    945</span> <span class=" -Color -Color-C124">&quot;&quot;&quot;Query the endpoint for a list of documents without associated meta information. Only</span>
<span class=" -Color -Color-Green">    946</span> <span class=" -Color -Color-C124">returns a single page of results.</span>
<span class=" -Color -Color-Green">    947</span> 
<span class=" -Color -Color-Bold -Color-Bold-Green">   (...)</span>
<span class=" -Color -Color-Green">    956</span> <span class=" -Color -Color-C124">    A list of documents</span>
<span class=" -Color -Color-Green">    957</span> <span class=" -Color -Color-C124">&quot;&quot;&quot;</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 958</span> <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_query_resource(  </span><span class=" -Color -Color-C66 -Color-C66-BGYellow"># type: ignore</span>
<span class=" -Color -Color-Green">    959</span> <span class=" -Color -Color-BGYellow">    criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria,</span>
<span class=" -Color -Color-Green">    960</span> <span class=" -Color -Color-BGYellow">    fields</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">fields,</span>
<span class=" -Color -Color-Green">    961</span> <span class=" -Color -Color-BGYellow">    suburl</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">suburl,</span>
<span class=" -Color -Color-Green">    962</span> <span class=" -Color -Color-BGYellow">    use_document_model</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">use_document_model,</span>
<span class=" -Color -Color-Green">    963</span> <span class=" -Color -Color-BGYellow">    chunk_size</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=1000</span><span class=" -Color -Color-BGYellow">,</span>
<span class=" -Color -Color-Green">    964</span> <span class=" -Color -Color-BGYellow">    num_chunks</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=1</span><span class=" -Color -Color-BGYellow">,</span>
<span class=" -Color -Color-Green">    965</span> <span class=" -Color -Color-BGYellow">)</span><span class=" -Color -Color-C241">.</span>get(<span class=" -Color -Color-C124">&quot;data&quot;</span>)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:408</span>, in <span class=" -Color -Color-Cyan">BaseRester._query_resource</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, criteria, fields, suburl, use_document_model, parallel_param, num_chunks, chunk_size, timeout)</span>
<span class=" -Color -Color-Green">    406</span>         url <span class=" -Color -Color-C241">+=</span> <span class=" -Color -Color-C124">&quot;/&quot;</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 408</span> data <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_submit_requests(</span>
<span class=" -Color -Color-Green">    409</span> <span class=" -Color -Color-BGYellow">    url</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">url,</span>
<span class=" -Color -Color-Green">    410</span> <span class=" -Color -Color-BGYellow">    criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria,</span>
<span class=" -Color -Color-Green">    411</span> <span class=" -Color -Color-BGYellow">    use_document_model</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">use_document_model,</span>
<span class=" -Color -Color-Green">    412</span> <span class=" -Color -Color-BGYellow">    parallel_param</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">parallel_param,</span>
<span class=" -Color -Color-Green">    413</span> <span class=" -Color -Color-BGYellow">    num_chunks</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">num_chunks,</span>
<span class=" -Color -Color-Green">    414</span> <span class=" -Color -Color-BGYellow">    chunk_size</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">chunk_size,</span>
<span class=" -Color -Color-Green">    415</span> <span class=" -Color -Color-BGYellow">    timeout</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">timeout,</span>
<span class=" -Color -Color-Green">    416</span> <span class=" -Color -Color-BGYellow">)</span>
<span class=" -Color -Color-Green">    418</span> <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> data

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:549</span>, in <span class=" -Color -Color-Cyan">BaseRester._submit_requests</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, url, criteria, use_document_model, parallel_param, num_chunks, chunk_size, timeout)</span>
<span class=" -Color -Color-Green">    545</span> initial_params_list <span class=" -Color -Color-C241">=</span> [
<span class=" -Color -Color-Green">    546</span>     {<span class=" -Color -Color-C124">&quot;url&quot;</span>: url, <span class=" -Color -Color-C124">&quot;verify&quot;</span>: <span class=" -Color -Color-Bold -Color-Bold-C28">True</span>, <span class=" -Color -Color-C124">&quot;params&quot;</span>: copy(crit)} <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> crit <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> new_criteria
<span class=" -Color -Color-Green">    547</span> ]
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 549</span> initial_data_tuples <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_multi_thread(</span>
<span class=" -Color -Color-Green">    550</span> <span class=" -Color -Color-BGYellow">    use_document_model, initial_params_list</span>
<span class=" -Color -Color-Green">    551</span> <span class=" -Color -Color-BGYellow">)</span>
<span class=" -Color -Color-Green">    553</span> <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> data, subtotal, crit_ind <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> initial_data_tuples:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:763</span>, in <span class=" -Color -Color-Cyan">BaseRester._multi_thread</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, use_document_model, params_list, progress_bar, timeout)</span>
<span class=" -Color -Color-Green">    762</span> <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> future <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> finished:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 763</span>     data, subtotal <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-BGYellow">future</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">result()</span>
<span class=" -Color -Color-Green">    765</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> progress_bar <span class=" -Color -Color-Bold -Color-Bold-C129">is</span> <span class=" -Color -Color-Bold -Color-Bold-C129">not</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\_base.py:437</span>, in <span class=" -Color -Color-Cyan">Future.result</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, timeout)</span>
<span class=" -Color -Color-Green">    436</span> <span class=" -Color -Color-Bold -Color-Bold-C28">elif</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_state <span class=" -Color -Color-C241">==</span> FINISHED:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 437</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">__get_result()</span>
<span class=" -Color -Color-Green">    439</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_condition<span class=" -Color -Color-C241">.</span>wait(timeout)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\_base.py:389</span>, in <span class=" -Color -Color-Cyan">Future.__get_result</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self)</span>
<span class=" -Color -Color-Green">    388</span> <span class=" -Color -Color-Bold -Color-Bold-C28">try</span>:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 389</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_exception
<span class=" -Color -Color-Green">    390</span> <span class=" -Color -Color-Bold -Color-Bold-C28">finally</span>:
<span class=" -Color -Color-Green">    391</span>     <span class=" -Color -Color-C66"># Break a reference cycle with the exception in self._exception</span>

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\thread.py:57</span>, in <span class=" -Color -Color-Cyan">_WorkItem.run</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self)</span>
<span class=" -Color -Color-Green">     56</span> <span class=" -Color -Color-Bold -Color-Bold-C28">try</span>:
<span class=" -Color -Color-Bold -Color-Bold-Green">---&gt; 57</span>     result <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">fn(</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">*</span><span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">args, </span><span class=" -Color -Color-C241 -Color-C241-BGYellow">**</span><span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">kwargs)</span>
<span class=" -Color -Color-Green">     58</span> <span class=" -Color -Color-Bold -Color-Bold-C28">except</span> <span class=" -Color -Color-Bold -Color-Bold-C167">BaseException</span> <span class=" -Color -Color-Bold -Color-Bold-C28">as</span> exc:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:870</span>, in <span class=" -Color -Color-Cyan">BaseRester._submit_request_and_process</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, url, verify, params, use_document_model, timeout)</span>
<span class=" -Color -Color-Green">    868</span>         message <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28">str</span>(data)
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 870</span> <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> MPRestError(
<span class=" -Color -Color-Green">    871</span>     <span class=" -Color -Color-C124">f&quot;REST query returned with error status code </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>response<span class=" -Color -Color-C241">.</span>status_code<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> &quot;</span>
<span class=" -Color -Color-Green">    872</span>     <span class=" -Color -Color-C124">f&quot;on URL </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>response<span class=" -Color -Color-C241">.</span>url<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> with message:</span><span class=" -Color -Color-Bold -Color-Bold-C130">\n</span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>message<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124">&quot;</span>
<span class=" -Color -Color-Green">    873</span> )

<span class=" -Color -Color-Bold -Color-Bold-Red">MPRestError</span>: REST query returned with error status code 404 on URL https://api.materialsproject.org/materials/phonon/mp-2657/?_limit=1&amp;_fields=ph_bs with message:
Not Found

During handling of the above exception, another exception occurred:

<span class=" -Color -Color-Bold -Color-Bold-Red">MPRestError</span>                               Traceback (most recent call last)
Input <span class=" -Color -Color-Bold -Color-Bold-Green">In [10]</span>, in <span class=" -Color -Color-Cyan">&lt;cell line: 54&gt;</span><span class=" -Color -Color-Bold -Color-Bold-Blue">()</span>
<span class=" -Color -Color-Green">     52</span>     ax[<span class=" -Color -Color-C241">1</span>]<span class=" -Color -Color-C241">.</span>set_xlim(<span class=" -Color -Color-C241">0</span>)
<span class=" -Color -Color-Green">     53</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> view
<span class=" -Color -Color-Bold -Color-Bold-Green">---&gt; 54</span> <span class=" -Color -Color-BGYellow">plot_phonon_and_structure(material_id)</span>

Input <span class=" -Color -Color-Bold -Color-Bold-Green">In [10]</span>, in <span class=" -Color -Color-Cyan">plot_phonon_and_structure</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(material_id)</span>
<span class=" -Color -Color-Green">      8</span> <span class=" -Color -Color-Bold -Color-Bold-C28">def</span> <span class=" -Color -Color-C21">plot_phonon_and_structure</span>(material_id):
<span class=" -Color -Color-Green">      9</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">with</span> MPRester(API_key) <span class=" -Color -Color-Bold -Color-Bold-C28">as</span> mpr:
<span class=" -Color -Color-Bold -Color-Bold-Green">---&gt; 10</span>         ph_bs <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-BGYellow">mpr</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">get_phonon_bandstructure_by_material_id(material_id)</span>
<span class=" -Color -Color-Green">     11</span>         ph_dos <span class=" -Color -Color-C241">=</span> mpr<span class=" -Color -Color-C241">.</span>get_phonon_dos_by_material_id(material_id)
<span class=" -Color -Color-Green">     12</span>         structure <span class=" -Color -Color-C241">=</span> mpr<span class=" -Color -Color-C241">.</span>get_structure_by_material_id(material_id)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\mprester.py:1222</span>, in <span class=" -Color -Color-Cyan">MPRester.get_phonon_bandstructure_by_material_id</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, material_id)</span>
<span class=" -Color -Color-Green">   1213</span> <span class=" -Color -Color-Bold -Color-Bold-C28">def</span> <span class=" -Color -Color-C21">get_phonon_bandstructure_by_material_id</span>(<span class=" -Color -Color-C28">self</span>, material_id: <span class=" -Color -Color-C28">str</span>):
<span class=" -Color -Color-Green">   1214</span> <span class=" -Color -Color-C250">    </span><span class=" -Color -Color-C124">&quot;&quot;&quot;Get phonon dispersion data corresponding to a material_id.</span>
<span class=" -Color -Color-Green">   1215</span> 
<span class=" -Color -Color-Green">   1216</span> <span class=" -Color -Color-C124">    Args:</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">   (...)</span>
<span class=" -Color -Color-Green">   1220</span> <span class=" -Color -Color-C124">        PhononBandStructureSymmLine:  phonon band structure.</span>
<span class=" -Color -Color-Green">   1221</span> <span class=" -Color -Color-C124">    &quot;&quot;&quot;</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">-&gt; 1222</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">phonon</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">get_data_by_id(material_id, fields</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">[</span><span class=" -Color -Color-C124 -Color-C124-BGYellow">&quot;ph_bs&quot;</span><span class=" -Color -Color-BGYellow">])</span><span class=" -Color -Color-C241">.</span>ph_bs

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:1027</span>, in <span class=" -Color -Color-Cyan">BaseRester.get_data_by_id</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, document_id, fields)</span>
<span class=" -Color -Color-Green">   1021</span>             <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> new_document_id <span class=" -Color -Color-Bold -Color-Bold-C129">is</span> <span class=" -Color -Color-Bold -Color-Bold-C129">not</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>:
<span class=" -Color -Color-Green">   1022</span>                 warnings<span class=" -Color -Color-C241">.</span>warn(
<span class=" -Color -Color-Green">   1023</span>                     <span class=" -Color -Color-C124">f&quot;Document primary key has changed from </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>document_id<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> to </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>new_document_id<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124">, &quot;</span>
<span class=" -Color -Color-Green">   1024</span>                     <span class=" -Color -Color-C124">f&quot;returning data for </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>new_document_id<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> in </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span><span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>suffix<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> route.    &quot;</span>
<span class=" -Color -Color-Green">   1025</span>                 )
<span class=" -Color -Color-Bold -Color-Bold-Green">-&gt; 1027</span>                 results <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_query_resource_data(</span>
<span class=" -Color -Color-Green">   1028</span> <span class=" -Color -Color-BGYellow">                    criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria, fields</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">fields, suburl</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">new_document_id  </span><span class=" -Color -Color-C66 -Color-C66-BGYellow"># type: ignore</span>
<span class=" -Color -Color-Green">   1029</span> <span class=" -Color -Color-BGYellow">                )</span>
<span class=" -Color -Color-Green">   1031</span> <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> <span class=" -Color -Color-Bold -Color-Bold-C129">not</span> results:
<span class=" -Color -Color-Green">   1032</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> MPRestError(<span class=" -Color -Color-C124">f&quot;No result for record </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>document_id<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124">.&quot;</span>)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:958</span>, in <span class=" -Color -Color-Cyan">BaseRester._query_resource_data</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, criteria, fields, suburl, use_document_model, timeout)</span>
<span class=" -Color -Color-Green">    937</span> <span class=" -Color -Color-Bold -Color-Bold-C28">def</span> <span class=" -Color -Color-C21">_query_resource_data</span>(
<span class=" -Color -Color-Green">    938</span>     <span class=" -Color -Color-C28">self</span>,
<span class=" -Color -Color-Green">    939</span>     criteria: <span class=" -Color -Color-C28">dict</span> <span class=" -Color -Color-C241">|</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span> <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>,
<span class=" -Color -Color-Bold -Color-Bold-Green">   (...)</span>
<span class=" -Color -Color-Green">    943</span>     timeout: <span class=" -Color -Color-C28">int</span> <span class=" -Color -Color-C241">|</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span> <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>,
<span class=" -Color -Color-Green">    944</span> ) <span class=" -Color -Color-C241">-&gt;</span> <span class=" -Color -Color-C28">list</span>[T] <span class=" -Color -Color-C241">|</span> <span class=" -Color -Color-C28">list</span>[<span class=" -Color -Color-C28">dict</span>]:
<span class=" -Color -Color-Green">    945</span> <span class=" -Color -Color-C250">    </span><span class=" -Color -Color-C124">&quot;&quot;&quot;Query the endpoint for a list of documents without associated meta information. Only</span>
<span class=" -Color -Color-Green">    946</span> <span class=" -Color -Color-C124">    returns a single page of results.</span>
<span class=" -Color -Color-Green">    947</span> 
<span class=" -Color -Color-Bold -Color-Bold-Green">   (...)</span>
<span class=" -Color -Color-Green">    956</span> <span class=" -Color -Color-C124">        A list of documents</span>
<span class=" -Color -Color-Green">    957</span> <span class=" -Color -Color-C124">    &quot;&quot;&quot;</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 958</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_query_resource(  </span><span class=" -Color -Color-C66 -Color-C66-BGYellow"># type: ignore</span>
<span class=" -Color -Color-Green">    959</span> <span class=" -Color -Color-BGYellow">        criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria,</span>
<span class=" -Color -Color-Green">    960</span> <span class=" -Color -Color-BGYellow">        fields</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">fields,</span>
<span class=" -Color -Color-Green">    961</span> <span class=" -Color -Color-BGYellow">        suburl</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">suburl,</span>
<span class=" -Color -Color-Green">    962</span> <span class=" -Color -Color-BGYellow">        use_document_model</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">use_document_model,</span>
<span class=" -Color -Color-Green">    963</span> <span class=" -Color -Color-BGYellow">        chunk_size</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=1000</span><span class=" -Color -Color-BGYellow">,</span>
<span class=" -Color -Color-Green">    964</span> <span class=" -Color -Color-BGYellow">        num_chunks</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=1</span><span class=" -Color -Color-BGYellow">,</span>
<span class=" -Color -Color-Green">    965</span> <span class=" -Color -Color-BGYellow">    )</span><span class=" -Color -Color-C241">.</span>get(<span class=" -Color -Color-C124">&quot;data&quot;</span>)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:408</span>, in <span class=" -Color -Color-Cyan">BaseRester._query_resource</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, criteria, fields, suburl, use_document_model, parallel_param, num_chunks, chunk_size, timeout)</span>
<span class=" -Color -Color-Green">    405</span>         <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> <span class=" -Color -Color-Bold -Color-Bold-C129">not</span> url<span class=" -Color -Color-C241">.</span>endswith(<span class=" -Color -Color-C124">&quot;/&quot;</span>):
<span class=" -Color -Color-Green">    406</span>             url <span class=" -Color -Color-C241">+=</span> <span class=" -Color -Color-C124">&quot;/&quot;</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 408</span>     data <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_submit_requests(</span>
<span class=" -Color -Color-Green">    409</span> <span class=" -Color -Color-BGYellow">        url</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">url,</span>
<span class=" -Color -Color-Green">    410</span> <span class=" -Color -Color-BGYellow">        criteria</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">criteria,</span>
<span class=" -Color -Color-Green">    411</span> <span class=" -Color -Color-BGYellow">        use_document_model</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">use_document_model,</span>
<span class=" -Color -Color-Green">    412</span> <span class=" -Color -Color-BGYellow">        parallel_param</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">parallel_param,</span>
<span class=" -Color -Color-Green">    413</span> <span class=" -Color -Color-BGYellow">        num_chunks</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">num_chunks,</span>
<span class=" -Color -Color-Green">    414</span> <span class=" -Color -Color-BGYellow">        chunk_size</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">chunk_size,</span>
<span class=" -Color -Color-Green">    415</span> <span class=" -Color -Color-BGYellow">        timeout</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">=</span><span class=" -Color -Color-BGYellow">timeout,</span>
<span class=" -Color -Color-Green">    416</span> <span class=" -Color -Color-BGYellow">    )</span>
<span class=" -Color -Color-Green">    418</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> data
<span class=" -Color -Color-Green">    420</span> <span class=" -Color -Color-Bold -Color-Bold-C28">except</span> RequestException <span class=" -Color -Color-Bold -Color-Bold-C28">as</span> ex:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:549</span>, in <span class=" -Color -Color-Cyan">BaseRester._submit_requests</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, url, criteria, use_document_model, parallel_param, num_chunks, chunk_size, timeout)</span>
<span class=" -Color -Color-Green">    543</span> remaining_docs_avail <span class=" -Color -Color-C241">=</span> {}
<span class=" -Color -Color-Green">    545</span> initial_params_list <span class=" -Color -Color-C241">=</span> [
<span class=" -Color -Color-Green">    546</span>     {<span class=" -Color -Color-C124">&quot;url&quot;</span>: url, <span class=" -Color -Color-C124">&quot;verify&quot;</span>: <span class=" -Color -Color-Bold -Color-Bold-C28">True</span>, <span class=" -Color -Color-C124">&quot;params&quot;</span>: copy(crit)} <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> crit <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> new_criteria
<span class=" -Color -Color-Green">    547</span> ]
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 549</span> initial_data_tuples <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">_multi_thread(</span>
<span class=" -Color -Color-Green">    550</span> <span class=" -Color -Color-BGYellow">    use_document_model, initial_params_list</span>
<span class=" -Color -Color-Green">    551</span> <span class=" -Color -Color-BGYellow">)</span>
<span class=" -Color -Color-Green">    553</span> <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> data, subtotal, crit_ind <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> initial_data_tuples:
<span class=" -Color -Color-Green">    554</span>     subtotals<span class=" -Color -Color-C241">.</span>append(subtotal)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:763</span>, in <span class=" -Color -Color-Cyan">BaseRester._multi_thread</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, use_document_model, params_list, progress_bar, timeout)</span>
<span class=" -Color -Color-Green">    760</span> finished, futures <span class=" -Color -Color-C241">=</span> wait(futures, return_when<span class=" -Color -Color-C241">=</span>FIRST_COMPLETED)
<span class=" -Color -Color-Green">    762</span> <span class=" -Color -Color-Bold -Color-Bold-C28">for</span> future <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> finished:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 763</span>     data, subtotal <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-BGYellow">future</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">result()</span>
<span class=" -Color -Color-Green">    765</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> progress_bar <span class=" -Color -Color-Bold -Color-Bold-C129">is</span> <span class=" -Color -Color-Bold -Color-Bold-C129">not</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>:
<span class=" -Color -Color-Green">    766</span>         progress_bar<span class=" -Color -Color-C241">.</span>update(<span class=" -Color -Color-C28">len</span>(data[<span class=" -Color -Color-C124">&quot;data&quot;</span>]))

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\_base.py:437</span>, in <span class=" -Color -Color-Cyan">Future.result</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, timeout)</span>
<span class=" -Color -Color-Green">    435</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> CancelledError()
<span class=" -Color -Color-Green">    436</span> <span class=" -Color -Color-Bold -Color-Bold-C28">elif</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_state <span class=" -Color -Color-C241">==</span> FINISHED:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 437</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">__get_result()</span>
<span class=" -Color -Color-Green">    439</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_condition<span class=" -Color -Color-C241">.</span>wait(timeout)
<span class=" -Color -Color-Green">    441</span> <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_state <span class=" -Color -Color-Bold -Color-Bold-C129">in</span> [CANCELLED, CANCELLED_AND_NOTIFIED]:

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\_base.py:389</span>, in <span class=" -Color -Color-Cyan">Future.__get_result</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self)</span>
<span class=" -Color -Color-Green">    387</span> <span class=" -Color -Color-Bold -Color-Bold-C28">if</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_exception:
<span class=" -Color -Color-Green">    388</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">try</span>:
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 389</span>         <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>_exception
<span class=" -Color -Color-Green">    390</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">finally</span>:
<span class=" -Color -Color-Green">    391</span>         <span class=" -Color -Color-C66"># Break a reference cycle with the exception in self._exception</span>
<span class=" -Color -Color-Green">    392</span>         <span class=" -Color -Color-C28">self</span> <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-Bold -Color-Bold-C28">None</span>

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\concurrent\futures\thread.py:57</span>, in <span class=" -Color -Color-Cyan">_WorkItem.run</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self)</span>
<span class=" -Color -Color-Green">     54</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">return</span>
<span class=" -Color -Color-Green">     56</span> <span class=" -Color -Color-Bold -Color-Bold-C28">try</span>:
<span class=" -Color -Color-Bold -Color-Bold-Green">---&gt; 57</span>     result <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">fn(</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">*</span><span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">args, </span><span class=" -Color -Color-C241 -Color-C241-BGYellow">**</span><span class=" -Color -Color-C28 -Color-C28-BGYellow">self</span><span class=" -Color -Color-C241 -Color-C241-BGYellow">.</span><span class=" -Color -Color-BGYellow">kwargs)</span>
<span class=" -Color -Color-Green">     58</span> <span class=" -Color -Color-Bold -Color-Bold-C28">except</span> <span class=" -Color -Color-Bold -Color-Bold-C167">BaseException</span> <span class=" -Color -Color-Bold -Color-Bold-C28">as</span> exc:
<span class=" -Color -Color-Green">     59</span>     <span class=" -Color -Color-C28">self</span><span class=" -Color -Color-C241">.</span>future<span class=" -Color -Color-C241">.</span>set_exception(exc)

File <span class=" -Color -Color-Bold -Color-Bold-Green">~\anaconda3\lib\site-packages\mp_api\client\core\client.py:870</span>, in <span class=" -Color -Color-Cyan">BaseRester._submit_request_and_process</span><span class=" -Color -Color-Bold -Color-Bold-Blue">(self, url, verify, params, use_document_model, timeout)</span>
<span class=" -Color -Color-Green">    867</span>     <span class=" -Color -Color-Bold -Color-Bold-C28">except</span> (<span class=" -Color -Color-Bold -Color-Bold-C167">KeyError</span>, <span class=" -Color -Color-Bold -Color-Bold-C167">IndexError</span>):
<span class=" -Color -Color-Green">    868</span>         message <span class=" -Color -Color-C241">=</span> <span class=" -Color -Color-C28">str</span>(data)
<span class=" -Color -Color-Bold -Color-Bold-Green">--&gt; 870</span> <span class=" -Color -Color-Bold -Color-Bold-C28">raise</span> MPRestError(
<span class=" -Color -Color-Green">    871</span>     <span class=" -Color -Color-C124">f&quot;REST query returned with error status code </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>response<span class=" -Color -Color-C241">.</span>status_code<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> &quot;</span>
<span class=" -Color -Color-Green">    872</span>     <span class=" -Color -Color-C124">f&quot;on URL </span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>response<span class=" -Color -Color-C241">.</span>url<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124"> with message:</span><span class=" -Color -Color-Bold -Color-Bold-C130">\n</span><span class=" -Color -Color-Bold -Color-Bold-C132">{</span>message<span class=" -Color -Color-Bold -Color-Bold-C132">}</span><span class=" -Color -Color-C124">&quot;</span>
<span class=" -Color -Color-Green">    873</span> )

<span class=" -Color -Color-Bold -Color-Bold-Red">MPRestError</span>: REST query returned with error status code 404 on URL https://api.materialsproject.org/materials/phonon/mp-2657/?_limit=1&amp;_fields=ph_bs with message:
Not Found
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">bands</span><span class="p">,</span> <span class="n">qpoints</span><span class="p">,</span> <span class="n">basis</span><span class="p">,</span> <span class="n">vector</span> <span class="o">=</span> <span class="n">shape</span><span class="p">(</span><span class="n">ph_bs</span><span class="o">.</span><span class="n">eigendisplacements</span><span class="p">)</span>
<span class="c1"># Sample eigenvectors and eigenvalues (replace with your actual data)</span>

<span class="n">eigenvectors</span> <span class="o">=</span> <span class="n">ph_bs</span><span class="o">.</span><span class="n">eigendisplacements</span>
<span class="n">eigenvalues</span>  <span class="o">=</span> <span class="n">ph_bs</span><span class="o">.</span><span class="n">bands</span>
<span class="n">qpoints_v</span> <span class="o">=</span> <span class="n">ph_bs</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()[</span><span class="s2">&quot;qpoints&quot;</span><span class="p">]</span>



<span class="c1"># Constants (you might need to adjust these)</span>
<span class="n">proportionality_IR</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">proportionality_Raman</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="c1"># Calculate IR intensities</span>
<span class="n">IR_intensities</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">bands</span><span class="p">,</span> <span class="n">qpoints</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bands</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">qpoints</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">basis_dir</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">basis</span><span class="p">):</span>
            <span class="n">IR_intensities</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">q</span><span class="p">]</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
                <span class="n">eigenvectors</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">basis_dir</span><span class="p">],</span>
                <span class="n">qpoints_v</span><span class="p">[</span><span class="n">q</span><span class="p">])</span>  <span class="c1"># Replace with actual Cartesian direction vector</span>
            <span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>

<span class="c1"># Calculate Raman intensities</span>
<span class="n">Raman_intensities</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">bands</span><span class="p">,</span> <span class="n">qpoints</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bands</span><span class="p">):</span>
    <span class="c1"># for q in range(qpoints):</span>
    <span class="k">for</span> <span class="n">basis_dir_alpha</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">basis</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">basis_dir_beta</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">basis</span><span class="p">):</span>
            <span class="n">Raman_intensities</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
                        <span class="n">eigenvectors</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">basis_dir_alpha</span><span class="p">],</span>
                        <span class="n">eigenvectors</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">basis_dir_beta</span><span class="p">]</span>
                    <span class="p">))</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">proportionality_Raman</span>

<span class="c1"># Normalize intensities</span>
<span class="n">IR_intensities</span> <span class="o">*=</span> <span class="n">proportionality_IR</span>
<span class="n">Raman_intensities</span> <span class="o">*=</span> <span class="n">proportionality_Raman</span>

<span class="c1"># Now you can plot the IR and Raman spectra using your preferred plotting library</span>
<span class="c1"># (e.g., Matplotlib)</span>
<span class="c1"># Plot Raman Spectrum</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">frequencies</span><span class="o">=</span><span class="n">eigenvalues</span>
<span class="n">IR_total</span><span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">frequencies</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
<span class="n">Freq_total</span><span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">frequencies</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bands</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">frequencies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mf">33.356</span><span class="p">,</span> <span class="n">Raman_intensities</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Mode </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">IR_total</span><span class="o">+=</span><span class="nb">list</span><span class="p">(</span><span class="n">Raman_intensities</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">Freq_total</span><span class="o">+=</span><span class="nb">list</span><span class="p">(</span><span class="n">frequencies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mf">33.356</span><span class="p">)</span>



<span class="n">Freq_0</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2000</span><span class="p">,</span><span class="mf">0.1</span><span class="p">))</span>
<span class="n">IR_0</span>   <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Freq_0</span><span class="p">)))</span>

<span class="n">Freq_total_s</span> <span class="o">=</span> <span class="n">Freq_0</span> <span class="o">+</span> <span class="n">Freq_total</span>
<span class="n">IR_total_s</span>   <span class="o">=</span> <span class="n">IR_0</span> <span class="o">+</span> <span class="n">IR_total</span>
<span class="nb">all</span><span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">IR_total_s</span><span class="p">)):</span>
    <span class="nb">all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">((</span><span class="n">Freq_total_s</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">IR_total_s</span><span class="p">[</span><span class="n">i</span><span class="p">])))</span>

<span class="nb">all</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="n">x</span><span class="o">=</span> <span class="p">[]</span>
<span class="n">y</span><span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">all</span><span class="p">:</span>
    <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    
<span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$Frequency [cm^{-1}]$&quot;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Intensity&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">frequencies</span> <span class="o">=</span> <span class="n">x</span> 
<span class="n">intensities</span> <span class="o">=</span> <span class="n">y</span> 


<span class="c1"># Crear un diccionario para realizar un seguimiento de las sumas de intensidades por frecuencia</span>
<span class="n">frequency_intensity_dict</span> <span class="o">=</span> <span class="p">{}</span>


<span class="k">for</span> <span class="n">frequency</span><span class="p">,</span> <span class="n">intensity</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">frequencies</span><span class="p">,</span> <span class="n">intensities</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">frequency</span> <span class="ow">in</span> <span class="n">frequency_intensity_dict</span><span class="p">:</span>
        <span class="n">frequency_intensity_dict</span><span class="p">[</span><span class="n">frequency</span><span class="p">]</span> <span class="o">+=</span> <span class="n">intensity</span>
    <span class="k">else</span><span class="p">:</span>
       
        <span class="n">frequency_intensity_dict</span><span class="p">[</span><span class="n">frequency</span><span class="p">]</span> <span class="o">=</span> <span class="n">intensity</span>

<span class="n">result_frequencies</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">frequency_intensity_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="n">result_intensities</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">frequency_intensity_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

<span class="n">plot</span><span class="p">(</span><span class="n">result_frequencies</span><span class="p">,</span><span class="n">result_intensities</span><span class="p">)</span>
<span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$Frequency [cm^{-1}]$&quot;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Intensity&quot;</span><span class="p">)</span>
<span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.signal</span> <span class="kn">import</span> <span class="n">argrelextrema</span>
<span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">wavenumb_sweep</span><span class="p">,</span> <span class="n">intensity_max</span><span class="p">,</span> <span class="n">wavenumber_max</span><span class="p">,</span> <span class="n">σ</span><span class="p">):</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">intensity_max</span> <span class="o">/</span> <span class="p">(</span><span class="n">σ</span> <span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span><span class="p">))</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">wavenumb_sweep</span><span class="o">-</span><span class="n">wavenumber_max</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">σ</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">new_y</span><span class="o">=</span><span class="n">array</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>  
    <span class="k">return</span> <span class="n">new_y</span>
<span class="n">result_frequencies</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">frequency_intensity_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="n">result_intensities</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">frequency_intensity_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>      

<span class="n">wavenumb</span>   <span class="o">=</span> <span class="n">result_frequencies</span>
<span class="n">max_int</span>    <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">result_intensities</span><span class="p">)</span>

<span class="n">norm_int</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result_intensities</span><span class="p">:</span>
    <span class="n">norm_int</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="n">max_int</span><span class="p">)</span>

<span class="c1">### Gausian function to broaden peaks</span>
<span class="n">pos_max</span>    <span class="o">=</span> <span class="n">argrelextrema</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">norm_int</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">greater</span><span class="p">)</span>
<span class="n">x</span>          <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">wavenumb</span><span class="p">)</span>
<span class="n">all_curve</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">σ</span> <span class="o">=</span> <span class="mi">20</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">pos_max</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
    <span class="n">all_curve</span> <span class="o">+=</span> <span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">norm_int</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">wavenumb</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">σ</span><span class="p">)</span>      
<span class="n">broad_int</span> <span class="o">=</span> <span class="n">all_curve</span>   

<span class="c1">### Normalization</span>

<span class="n">max_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">broad_int</span><span class="p">)</span>
<span class="n">int_norm</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">broad_int</span><span class="p">:</span>
    <span class="n">int_norm</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="o">/</span><span class="n">max_y</span><span class="p">))</span>
<span class="n">plot</span><span class="p">(</span><span class="n">wavenumb</span><span class="p">,</span><span class="n">int_norm</span><span class="p">)</span>

<span class="n">plot</span><span class="p">(</span><span class="n">result_frequencies</span><span class="p">,</span><span class="n">result_intensities</span><span class="p">)</span>
<span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$Frequency [cm^{-1}]$&quot;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Intensity&quot;</span><span class="p">)</span>
<span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="comparison-of-experimental-data-and-simulated-raman">
<h2>Comparison of experimental data and simulated Raman<a class="headerlink" href="#comparison-of-experimental-data-and-simulated-raman" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">txt_raman_reader</span> <span class="kn">import</span> <span class="n">RRUFF_text</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">RRUFF_text</span><span class="p">(</span><span class="s2">&quot;rutile_exp_dep.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">_read_file</span><span class="p">()</span>
<span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;wavenumbers&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;intensities_normalized&quot;</span><span class="p">])</span>
<span class="n">plot</span><span class="p">(</span><span class="n">wavenumb</span><span class="p">,</span><span class="n">int_norm</span><span class="p">)</span>

<span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$Frequency [cm^{-1}]$&quot;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Intensity&quot;</span><span class="p">)</span>
<span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="how-raman-and-ir-are-simulated-in-reality">
<h1>How Raman and IR are simulated in reality?<a class="headerlink" href="#how-raman-and-ir-are-simulated-in-reality" title="Permalink to this heading">#</a></h1>
<p>In simulations of Raman and IR spectra within the framework of density functional theory (DFT), the calculation of Raman and IR intensities involves the polarizability tensor and Born charge derivatives:</p>
<p><strong>Polarizability Tensor:</strong></p>
<p>The polarizability tensor is a key concept in the calculation of Raman and IR intensities. It characterizes how the electron cloud of a molecule or crystal responds to an external electric field. The polarizability tensor is usually represented as a 3x3 matrix in three-dimensional space. Each element of this matrix represents how the electron cloud responds to an electric field in a specific direction.</p>
<p>In the context of Raman and IR spectroscopy:</p>
<ul class="simple">
<li><p>IR Spectroscopy: In IR spectroscopy, the polarizability tensor is used to calculate the intensity of IR-active modes. When atoms in a material vibrate, they induce changes in the electron density, leading to changes in the dipole moment of the system. The polarizability tensor relates the atomic displacements to these changes in dipole moment, allowing you to determine which vibrational modes will be IR-active.</p></li>
<li><p>Raman Spectroscopy: In Raman spectroscopy, the polarizability tensor is used to calculate the intensity of Raman-active modes. Here, the change in the polarizability of the system due to atomic vibrations is what matters. The polarizability tensor relates the atomic displacements to changes in the polarizability, and this information helps determine which vibrational modes will be Raman-active.</p></li>
</ul>
<p><strong>Born Charge Derivatives:</strong></p>
<p>The Born charge derivatives are another critical component in these simulations, especially when dealing with crystalline materials. The Born charge, denoted as <em>Z</em>, represents the effective charge of an atom in a crystal due to the interaction with the surrounding lattice. The Born charge derivatives refer to how this effective charge changes as the atomic positions vary.</p>
<p>In the context of Raman and IR simulations:</p>
<p>IR Spectroscopy: To calculate IR intensities in crystalline materials, you often need the derivatives of the Born charge with respect to atomic displacements. These derivatives, known as the “Born effective charges” help account for the response of atoms within the crystal to the vibrational modes. They are essential for determining the IR activity of vibrational modes in crystals.</p>
<p>Raman Spectroscopy: Born charge derivatives are also important for Raman spectroscopy, particularly in the context of lattice dynamics. These derivatives describe how the polarizability changes with atomic displacements and are used to calculate Raman intensities, especially in crystalline materials.</p>
<p>In summary, the polarizability tensor and Born charge derivatives play crucial roles in simulating Raman and IR spectra within the DFT framework, allowing you to predict which vibrational modes will be active and the intensities of these modes in the corresponding spectra. Understanding these quantities and their relationships to the atomic and electronic properties of the material is essential for accurate spectroscopic predictions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">freq_dft</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.129780207231549269e+02</span> <span class="p">,</span> <span class="mf">1.129780207231552680e+02</span> <span class="p">,</span><span class="mf">1.749879864729470853e+02</span> <span class="p">,</span><span class="mf">1.749879864729474264e+02</span> <span class="p">,</span><span class="mf">3.611532269867757350e+02</span> <span class="p">,</span><span class="mf">4.793102600546089320e+02</span> <span class="p">,</span><span class="mf">4.957302896450344178e+02</span> <span class="p">,</span><span class="mf">6.001592985713667758e+02</span> <span class="p">,</span><span class="mf">6.001592985713667758e+02</span><span class="p">]</span> 
<span class="n">int_dft</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.000000000000000000e+00</span><span class="p">,</span><span class="mf">9.999999999999938938e-01</span><span class="p">,</span><span class="mf">2.939221091892205324e-03</span><span class="p">,</span><span class="mf">2.939221091892158921e-03</span><span class="p">,</span><span class="mf">1.494269659327405464e-01</span><span class="p">,</span><span class="mf">1.890540997545240437e-02</span><span class="p">,</span><span class="mf">1.019312927046264333e-01</span><span class="p">,</span><span class="mf">1.445200115409593922e-01</span><span class="p">,</span><span class="mf">1.445200115409594477e-01</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">Gaus_norm</span><span class="p">(</span> <span class="n">list_freq</span><span class="p">,</span><span class="n">list_int</span><span class="p">,</span> <span class="n">sigma</span><span class="p">):</span>
    <span class="c1">### Gausian function to broaden peaks</span>
    <span class="n">int_dft_m</span>      <span class="o">=</span> <span class="n">list_int</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">wavenumb</span><span class="p">)))</span>
    <span class="n">x_dft</span>          <span class="o">=</span> <span class="n">list_freq</span> <span class="o">+</span> <span class="n">wavenumb</span>
    
    <span class="nb">all</span><span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">int_dft_m</span> <span class="p">)):</span>
        <span class="nb">all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">((</span><span class="n">x_dft</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">int_dft_m</span><span class="p">[</span><span class="n">i</span><span class="p">])))</span>
    
    <span class="nb">all</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="n">x</span><span class="o">=</span> <span class="p">[]</span>
    <span class="n">y</span><span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">all</span><span class="p">:</span>
        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    
    <span class="n">frequencies</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">intensities</span> <span class="o">=</span> <span class="n">y</span>
    
    <span class="c1"># Crear un diccionario para realizar un seguimiento de las sumas de intensidades por frecuencia</span>
    <span class="n">frequency_intensity_dict</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">for</span> <span class="n">frequency</span><span class="p">,</span> <span class="n">intensity</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">frequencies</span><span class="p">,</span> <span class="n">intensities</span><span class="p">):</span>
    
        <span class="k">if</span> <span class="n">frequency</span> <span class="ow">in</span> <span class="n">frequency_intensity_dict</span><span class="p">:</span>
            <span class="n">frequency_intensity_dict</span><span class="p">[</span><span class="n">frequency</span><span class="p">]</span> <span class="o">+=</span> <span class="n">intensity</span>
        <span class="k">else</span><span class="p">:</span>
           
            <span class="n">frequency_intensity_dict</span><span class="p">[</span><span class="n">frequency</span><span class="p">]</span> <span class="o">=</span> <span class="n">intensity</span>
    
    <span class="n">result_frequencies_dft</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">frequency_intensity_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">result_intensities_dft</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">frequency_intensity_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>    
    
    
    <span class="n">wavenumb_dft</span>   <span class="o">=</span> <span class="n">result_frequencies_dft</span>
    <span class="n">max_int</span>    <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">result_intensities_dft</span><span class="p">)</span>
    
    <span class="n">norm_int</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result_intensities_dft</span><span class="p">:</span>
        <span class="n">norm_int</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="n">max_int</span><span class="p">)</span>
    
    <span class="c1">### Gausian function to broaden peaks</span>
    <span class="n">pos_max</span>    <span class="o">=</span> <span class="n">argrelextrema</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">norm_int</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">greater</span><span class="p">)</span>
    
    <span class="n">x</span>          <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">wavenumb</span><span class="p">)</span>
    
    <span class="n">all_curve</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">σ</span> <span class="o">=</span> <span class="n">sigma</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">pos_max</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">all_curve</span> <span class="o">+=</span> <span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">norm_int</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">wavenumb</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">σ</span><span class="p">)</span>      
    <span class="n">broad_int</span> <span class="o">=</span> <span class="n">all_curve</span>   
    
    <span class="c1">### Normalization</span>
    
    <span class="n">max_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">broad_int</span><span class="p">)</span>
    <span class="n">int_norm_dft</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">broad_int</span><span class="p">:</span>
        <span class="n">int_norm_dft</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="o">/</span><span class="n">max_y</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">wavenumb</span><span class="p">,</span> <span class="n">int_norm_dft</span><span class="p">,</span> <span class="n">result_intensities_dft</span>
<span class="kn">import</span> <span class="nn">json</span>
 
<span class="c1"># Opening JSON file</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;crd.json&#39;</span><span class="p">)</span>
 
<span class="c1"># returns JSON object as</span>
<span class="c1"># a dictionary</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">intensity_raman</span><span class="p">(</span><span class="n">raman_tensor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Average a Raman-activity tensor to obtain a scalar</span>
<span class="sd">    intensity. &quot;&quot;&quot;</span>

    <span class="c1"># This formula came from D. Porezag and M. R. Pederson, Phys. Rev.</span>
    <span class="c1"># B: Condens. Matter Mater. Phys., 1996, 54, 7830.</span>
    
        
    <span class="k">if</span> <span class="n">raman_tensor</span><span class="o">==</span><span class="kc">None</span> <span class="ow">or</span> <span class="n">raman_tensor</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span> 

        <span class="n">alpha</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">raman_tensor</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">raman_tensor</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">raman_tensor</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
            <span class="o">/</span> <span class="mf">3.0</span><span class="p">)</span>
    
        <span class="n">beta_squared</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">raman_tensor</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">raman_tensor</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">raman_tensor</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">raman_tensor</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">raman_tensor</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">raman_tensor</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="o">+</span> <span class="mf">6.0</span> <span class="o">*</span> <span class="p">(</span><span class="n">raman_tensor</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">raman_tensor</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span>
                <span class="n">raman_tensor</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
            <span class="p">)</span>
    
        <span class="k">return</span> <span class="p">(</span><span class="mf">45.0</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="mf">7.0</span> <span class="o">*</span> <span class="n">beta_squared</span><span class="p">)</span>
<span class="n">freq</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;4146&quot;</span><span class="p">][</span><span class="s2">&quot;key_value_pairs&quot;</span><span class="p">][</span><span class="s2">&quot;frequencies_cm&quot;</span><span class="p">]</span>
<span class="n">freq</span><span class="o">=</span> <span class="n">freq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
<span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
<span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
<span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="n">freqs_db</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span>  <span class="ow">in</span> <span class="n">freq</span> <span class="p">]</span> 
<span class="n">ints_ram_t</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;4146&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;raman_tensors&quot;</span><span class="p">]:</span>
    <span class="n">ints_ram_t</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">intensity_raman</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    
<span class="n">int_db</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;4146&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;Ramanactive&quot;</span><span class="p">][</span><span class="s2">&quot;__ndarray__&quot;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>

<span class="c1"># freq_gn, int_gn, int_n = Gaus_norm(freqs_db,int_db,10)</span>
<span class="c1"># plot(freq_gn, int_n, label= &quot;DFT-DB-1&quot;)</span>

<span class="n">freq_gn</span><span class="p">,</span> <span class="n">int_gn</span><span class="p">,</span> <span class="n">int_n</span> <span class="o">=</span> <span class="n">Gaus_norm</span><span class="p">(</span><span class="n">freqs_db</span><span class="p">,</span><span class="n">ints_ram_t</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">freq_gn</span><span class="p">,</span> <span class="n">int_gn</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span> <span class="s2">&quot;DFT-DB&quot;</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;wavenumbers&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;intensities_normalized&quot;</span><span class="p">])</span>
<span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$Frequency [cm^{-1}]$&quot;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Intensity&quot;</span><span class="p">)</span>
<span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>


<span class="c1"># wavenumb, int_norm_dft, result_intensities_dft = Gaus_norm( freq_dft, int_dft, 10)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="research-at-epfl">
<h1>Research at EPFL<a class="headerlink" href="#research-at-epfl" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_a</span><span class="o">=</span><span class="n">RRUFF_text</span><span class="p">(</span><span class="s2">&quot;anastase_532_exp.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">_read_file</span><span class="p">()</span>

<span class="n">freq_dft</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.129780207231549269e+02</span> <span class="p">,</span> <span class="mf">1.129780207231552680e+02</span> <span class="p">,</span><span class="mf">1.749879864729470853e+02</span> <span class="p">,</span><span class="mf">1.749879864729474264e+02</span> <span class="p">,</span><span class="mf">3.611532269867757350e+02</span> <span class="p">,</span><span class="mf">4.793102600546089320e+02</span> <span class="p">,</span><span class="mf">4.957302896450344178e+02</span> <span class="p">,</span><span class="mf">6.001592985713667758e+02</span> <span class="p">,</span><span class="mf">6.001592985713667758e+02</span><span class="p">]</span> 
<span class="n">int_dft</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.000000000000000000e+00</span><span class="p">,</span><span class="mf">9.999999999999938938e-01</span><span class="p">,</span><span class="mf">2.939221091892205324e-03</span><span class="p">,</span><span class="mf">2.939221091892158921e-03</span><span class="p">,</span><span class="mf">1.494269659327405464e-01</span><span class="p">,</span><span class="mf">1.890540997545240437e-02</span><span class="p">,</span><span class="mf">1.019312927046264333e-01</span><span class="p">,</span><span class="mf">1.445200115409593922e-01</span><span class="p">,</span><span class="mf">1.445200115409594477e-01</span><span class="p">]</span>
<span class="n">freq_dft</span><span class="p">,</span> <span class="n">int_dft</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Gaus_norm</span><span class="p">(</span><span class="n">freq_dft</span><span class="p">,</span><span class="n">int_dft</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">freq_dft</span><span class="p">,</span><span class="n">int_dft</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">df_a</span><span class="p">[</span><span class="s2">&quot;wavenumbers&quot;</span><span class="p">],</span><span class="n">df_a</span><span class="p">[</span><span class="s2">&quot;intensities_normalized&quot;</span><span class="p">])</span>

<span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$Frequency [cm^{-1}]$&quot;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Intensity&quot;</span><span class="p">)</span>
<span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AntonioCd96/IR-and-Raman.git",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./IR-Raman-Axolotl"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">IR and raman</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#example-for-tio-2-rutile">Example for <span class="math notranslate nohighlight">\(TiO_2 - rutile\)</span></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comparison-of-experimental-data-and-simulated-raman">Comparison of experimental data and simulated Raman</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#how-raman-and-ir-are-simulated-in-reality">How Raman and IR are simulated in reality?</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#research-at-epfl">Research at EPFL</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Dr. Mounir Mensi, Dr. Kevin Jablonka and  Antonio Doñez
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>